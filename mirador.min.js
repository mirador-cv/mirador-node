!function t(n,e,r){function i(a,u){if(!e[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[a]={exports:{}};n[a][0].call(l.exports,function(t){var e=n[a][1][t];return i(e?e:t)},l,l.exports,t,n,e,r)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n){function e(t){return t.substring(t.indexOf(";base64,")+8).replace("\n","")}function r(t,n,e){if(!this.apikey||!this.authorized)throw"unauthorized";this.xdm.ajax({data:n},function(t){e(null,f.parse(t.results))},function(t){e(t,null)})}function i(t,n){if(this._inst[t]&&this._inst[t].authorized){var e=this._inst[t];return n.call(e,e),e}this.xdm=new c.Rpc({remote:p},{remote:{ajax:{},authorize:{}}}),this.apikey=t;var r=this;this.xdm.authorize(this.apikey,function(t){if(t)throw"unauthorized: "+r.apikey+" for domain";r.authorized=!0,r.onready(r),r._inst[r.apikey]=r}),this.onready=n}var o=t("./util"),a=t("underscore"),u=t("util"),s=(t("events"),t("./mirador")),c=t("easyxdm").easyXDM,l=s.MiradorClient,f=(s.miradorRequest,s.MiradorResponse),p="http://test.mirador.im:8080/static/xdm.html",h=s.reqWrapper;a.extend(o.MiradorRequestList.prototype._processors,{field:function(t,n){if(!t||!t.id)return n(t,null);var r=new window.FileReader;r.onload=function(r){var i=r.target.result;n(null,{id:t.id,data:e(i)})},r.readAsDataURL(t.data)},datauri:function(t,n){return t&&t.data?void n(null,{id:t.id,data:e(t.data)}):n(t,null)},canvas:function(t,n){return t&&t.data?void n(null,{id:t.id,data:e(t.data.toDataURL())}):n(t,null)}}),u.inherits(i,l),a.extend(i.prototype,{_inst:{},classifyFiles:h("field",r),classifyDataUri:h("datauri",r),classifyCanvas:h("canvas",r),classifyUrls:h("url",r)}),n.exports={MiradorClient:i},window.mirador=window.mirador||{},window.mirador.MiradorClient=i,window.jQuery&&(window.jQuery.fn.mirador=function(t,n){function e(t,n,e){return function(){var r=a.toArray(arguments),i=function(){};a.isFunction(r[r.length-1])&&(i=r.pop()),r.push(function(t,e){e&&n.trigger(s.resultEvent,e),t&&n.trigger(s.errorEvent,t),i.call(this,t,e)}),t.apply(e,r)}}function r(t){var n=t.target.files;n&&n.length&&this.classifyFiles(n,function(t,n){t?o.trigger(s.errorEvent,t):o.trigger(s.resultEvent,n)})}function i(t){o.trigger(s.readyEvent,t),s.selector?o.on(s.bindTo,s.selector,r.bind(t)):null===s.selector&&o.on(s.bindTo,r.bind(t))}var o=this,u='input[type="file"]';"INPUT"===this.prop("tagName")&&/file/i.test(this.attr("type"))&&(u=null);var s=$.extend({errorEvent:"mirador.error",resultEvent:"mirador.result",readyEvent:"mirador.ready",selector:u,bindTo:"change"},n);return this._miradorclient=new window.mirador.MiradorClient(t,i),window.jQuery.mirador={classifyUrls:e(this._miradorclient.classifyUrls,this,this._miradorclient),classifyFiles:e(this._miradorclient.classifyFiles,this,this._miradorclient),classifyCanvas:e(this._miradorclient.classifyCanvas,this,this._miradorclient),classifyDataUri:e(this._miradorclient.classifyDataUri,this,this._miradorclient),client:this._miradorclient}})},{"./mirador":3,"./util":4,easyxdm:11,events:6,underscore:15,util:10}],2:[function(t,n){n.exports={readFile:function(){throw"cannot read file in browser"},readFileAsync:function(){throw"cannot read async in browser"}}},{}],3:[function(t,n){function e(t,n,e){return function(){e=e||this;var r=a.splattedBlock(s.toArray(arguments)),i=r[1],o=a.buildRequestList(r[0]);o.serialize(t,function(t,r){u.map(r,function(r,i){n.call(e,t,r,i)},function(t,n){if(t)return i(t,n);var e={},r=0;s.each(n,function(t){s.each(t,function(t,n){e[n]=t,r++})}),Object.defineProperty(e,"size",{value:r,enumerable:!1,writable:!1}),i(t,e)})})}}function r(t){this.apikey=t}function i(t,n,e){return t?e(t,null):void l.post(c+"/classify").type("form").set("Accept","application/json").send({api_key:this.apikey}).send(n).end(function(t,n){return t||!n.ok?e(t||n.status,n):n.body.results?void e(null,o.parse(n.body.results)):e({errors:"invalid response",code:500},n)})}function o(t,n){return!t||t.errors?(t=t||{},this.id=t.id,void(this.errors=t.errors||"Error in response")):(this.id=t.id||t.url||n,this.value=t.result.value,this.safe=t.result.safe,this.breast=t.result.breast4,this.penis=t.result.penis4,this.vagina=t.result.vagina4,void(this.butt=t.result.butt4))}var a=t("./util.js"),u=t("async"),s=t("underscore"),c="http://api.mirador.im/v1",l=t("superagent");r.prototype={classifyUrls:e("url",i),classifyFiles:e("image",i),classifyBuffers:e("buffer",i),classifyBare:e("bare",i)},r.prototype.classifyRaw=r.prototype.classifyBuffers,o.parse=function(t){var n={},e=!1;return s.each(t,function(t,r){var i=new o(t,r);/^\d+$/.test(i.id)?(e=!0,n[i.id=parseInt(i.id)]=i):n[i.id]=i}),n},n.exports={MiradorClient:r,reqWrapper:e,miradorRequest:i,MiradorResponse:o}},{"./util.js":4,async:5,superagent:12,underscore:15}],4:[function(t,n){function e(t){this._data=t&&t.length?t:[]}function r(t){if(u.isObject(t)&&t.id&&t.data)return[t];if(u.isArray(t)){if(u.isArray(t[0]))return r(t[0]);if("[object FileList]"===t[0].toString()){var n=[];return u.each(t,function(t){u.each(t,function(t){n.push({id:t.name,data:t})})}),n}return u.map(t,function(t,n){if(u.isString(t))return{id:t,data:t};if(u.isObject(t)&&u.has(t,"id")&&u.has(t,"data"))return t;var e=null!=t.id?t.id:null!=t.name?t.name:n;return{id:e,data:t}})}if(u.isObject(t))return u.map(t,function(t,n){return{id:n,data:t}});throw"invalid input: "+t}function i(t){if(!u.isFunction(t[t.length-1]))throw"invalid input: last argument must be a callback!";var n=t.pop();return[t,n]}function o(t){return!u.isArray(t)&&t.length&&(t=u.toArray(t)),new e(r(t))}var a=t("async"),u=t("underscore"),s=t("fs");e.prototype={chunk_size:4,_processors:{url:function(t,n){n(null,t)},image:function(t,n){this._processImage(t.data,function(e,r){return e||!r?n(e,r):void n(null,{id:t.id,data:r})})},buffer:function(t,n){n(null,{id:t.id,data:this._formatBuffer(t.data)})}},serialize:function(t,n){var e=this;a.map(this._data,this._processors[t].bind(this),function(r,i){if(r||!i||!i.length)return n(r,i);var o={},a=0,s=[];u.each(i,function(n){a==e.chunk_size&&(s.push(o),o={},a=0);var r=e._itemKeys(t,a);o[r.id]=n.id,o[r.data]=n.data,a++}),u.isEmpty(o)||s.push(o),n(null,s)})},_processImage:function(t,n){var e=this;s.readFile(t,function(t,r){return t?n(t,null):void n(null,e._formatBuffer(r))})},_formatBuffer:function(t){return t.toString("base64").replace("\n","")},_typeMap:{buffer:"image",field:"image",raw:"image",canvas:"image"},_itemKeys:function(t,n){t=this._typeMap[t]?this._typeMap[t]:t;var e=t+"["+n+"]";return{id:e+"[id]",data:e+"[data]"}},add:function(t,n){this._data.push({id:t,data:n})},length:function(){return this._data.length}},n.exports={MiradorRequestList:e,buildRequestList:o,splattedBlock:i}},{async:5,fs:2,underscore:15}],5:[function(t,n){(function(t){!function(){function e(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(r,arguments)}}var r,i,o={};r=this,null!=r&&(i=r.async),o.noConflict=function(){return r.async=i,o};var a=Object.prototype.toString,u=Array.isArray||function(t){return"[object Array]"===a.call(t)},s=function(t,n){if(t.forEach)return t.forEach(n);for(var e=0;e<t.length;e+=1)n(t[e],e,t)},c=function(t,n){if(t.map)return t.map(n);var e=[];return s(t,function(t,r,i){e.push(n(t,r,i))}),e},l=function(t,n,e){return t.reduce?t.reduce(n,e):(s(t,function(t,r,i){e=n(e,t,r,i)}),e)},f=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n};"undefined"!=typeof t&&t.nextTick?(o.nextTick=t.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(t){setImmediate(t)},o.setImmediate=o.nextTick):(o.nextTick=function(t){setTimeout(t,0)},o.setImmediate=o.nextTick),o.each=function(t,n,r){function i(n){n?(r(n),r=function(){}):(o+=1,o>=t.length&&r())}if(r=r||function(){},!t.length)return r();var o=0;s(t,function(t){n(t,e(i))})},o.forEach=o.each,o.eachSeries=function(t,n,e){if(e=e||function(){},!t.length)return e();var r=0,i=function(){n(t[r],function(n){n?(e(n),e=function(){}):(r+=1,r>=t.length?e():i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(t,n,e,r){var i=p(n);i.apply(null,[t,e,r])},o.forEachLimit=o.eachLimit;var p=function(t){return function(n,e,r){if(r=r||function(){},!n.length||0>=t)return r();var i=0,o=0,a=0;!function u(){if(i>=n.length)return r();for(;t>a&&o<n.length;)o+=1,a+=1,e(n[o-1],function(t){t?(r(t),r=function(){}):(i+=1,a-=1,i>=n.length?r():u())})}()}},h=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[o.each].concat(n))}},d=function(t,n){return function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[p(t)].concat(e))}},m=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[o.eachSeries].concat(n))}},v=function(t,n,e,r){if(n=c(n,function(t,n){return{index:n,value:t}}),r){var i=[];t(n,function(t,n){e(t.value,function(e,r){i[t.index]=r,n(e)})},function(t){r(t,i)})}else t(n,function(t,n){e(t.value,function(t){n(t)})})};o.map=h(v),o.mapSeries=m(v),o.mapLimit=function(t,n,e,r){return y(n)(t,e,r)};var y=function(t){return d(t,v)};o.reduce=function(t,n,e,r){o.eachSeries(t,function(t,r){e(n,t,function(t,e){n=e,r(t)})},function(t){r(t,n)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(t,n,e,r){var i=c(t,function(t){return t}).reverse();o.reduce(i,n,e,r)},o.foldr=o.reduceRight;var g=function(t,n,e,r){var i=[];n=c(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e&&i.push(t),n()})},function(){r(c(i.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};o.filter=h(g),o.filterSeries=m(g),o.select=o.filter,o.selectSeries=o.filterSeries;var w=function(t,n,e,r){var i=[];n=c(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e||i.push(t),n()})},function(){r(c(i.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};o.reject=h(w),o.rejectSeries=m(w);var b=function(t,n,e,r){t(n,function(t,n){e(t,function(e){e?(r(t),r=function(){}):n()})},function(){r()})};o.detect=h(b),o.detectSeries=m(b),o.some=function(t,n,e){o.each(t,function(t,r){n(t,function(t){t&&(e(!0),e=function(){}),r()})},function(){e(!1)})},o.any=o.some,o.every=function(t,n,e){o.each(t,function(t,r){n(t,function(t){t||(e(!1),e=function(){}),r()})},function(){e(!0)})},o.all=o.every,o.sortBy=function(t,n,e){o.map(t,function(t,e){n(t,function(n,r){n?e(n):e(null,{value:t,criteria:r})})},function(t,n){if(t)return e(t);var r=function(t,n){var e=t.criteria,r=n.criteria;return r>e?-1:e>r?1:0};e(null,c(n.sort(r),function(t){return t.value}))})},o.auto=function(t,n){n=n||function(){};var e=f(t),r=e.length;if(!r)return n();var i={},a=[],c=function(t){a.unshift(t)},p=function(t){for(var n=0;n<a.length;n+=1)if(a[n]===t)return void a.splice(n,1)},h=function(){r--,s(a.slice(0),function(t){t()})};c(function(){if(!r){var t=n;n=function(){},t(null,i)}}),s(e,function(e){var r=u(t[e])?t[e]:[t[e]],a=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),t){var a={};s(f(i),function(t){a[t]=i[t]}),a[e]=r,n(t,a),n=function(){}}else i[e]=r,o.setImmediate(h)},d=r.slice(0,Math.abs(r.length-1))||[],m=function(){return l(d,function(t,n){return t&&i.hasOwnProperty(n)},!0)&&!i.hasOwnProperty(e)};if(m())r[r.length-1](a,i);else{var v=function(){m()&&(p(v),r[r.length-1](a,i))};c(v)}})},o.retry=function(t,n,e){var r=5,i=[];"function"==typeof t&&(e=n,n=t,t=r),t=parseInt(t,10)||r;var a=function(r,a){for(var u=function(t,n){return function(e){t(function(t,r){e(!t||n,{err:t,result:r})},a)}};t;)i.push(u(n,!(t-=1)));o.series(i,function(t,n){n=n[n.length-1],(r||e)(n.err,n.result)})};return e?a():a},o.waterfall=function(t,n){if(n=n||function(){},!u(t)){var e=new Error("First argument to waterfall must be an array of functions");return n(e)}if(!t.length)return n();var r=function(t){return function(e){if(e)n.apply(null,arguments),n=function(){};else{var i=Array.prototype.slice.call(arguments,1),a=t.next();i.push(a?r(a):n),o.setImmediate(function(){t.apply(null,i)})}}};r(o.iterator(t))()};var _=function(t,n,e){if(e=e||function(){},u(n))t.map(n,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},e);else{var r={};t.each(f(n),function(t,e){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,e(n)})},function(t){e(t,r)})}};o.parallel=function(t,n){_({map:o.map,each:o.each},t,n)},o.parallelLimit=function(t,n,e){_({map:y(n),each:p(n)},t,e)},o.series=function(t,n){if(n=n||function(){},u(t))o.mapSeries(t,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},n);else{var e={};o.eachSeries(f(t),function(n,r){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e[n]=i,r(t)})},function(t){n(t,e)})}},o.iterator=function(t){var n=function(e){var r=function(){return t.length&&t[e].apply(null,arguments),r.next()};return r.next=function(){return e<t.length-1?n(e+1):null},r};return n(0)},o.apply=function(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var x=function(t,n,e,r){var i=[];t(n,function(t,n){e(t,function(t,e){i=i.concat(e||[]),n(t)})},function(t){r(t,i)})};o.concat=h(x),o.concatSeries=m(x),o.whilst=function(t,n,e){t()?n(function(r){return r?e(r):void o.whilst(t,n,e)}):e()},o.doWhilst=function(t,n,e){t(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?o.doWhilst(t,n,e):e()})},o.until=function(t,n,e){t()?e():n(function(r){return r?e(r):void o.until(t,n,e)})},o.doUntil=function(t,n,e){t(function(r){if(r)return e(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?e():o.doUntil(t,n,e)})},o.queue=function(t,n){function r(t,n,e,r){return t.started||(t.started=!0),u(n)||(n=[n]),0==n.length?o.setImmediate(function(){t.drain&&t.drain()}):void s(n,function(n){var i={data:n,callback:"function"==typeof r?r:null};e?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}void 0===n&&(n=1);var i=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,n){r(a,t,!1,n)},kill:function(){a.drain=null,a.tasks=[]},unshift:function(t,n){r(a,t,!0,n)},process:function(){if(!a.paused&&i<a.concurrency&&a.tasks.length){var n=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),i+=1;var r=function(){i-=1,n.callback&&n.callback.apply(n,arguments),a.drain&&a.tasks.length+i===0&&a.drain(),a.process()},o=e(r);t(n.data,o)}},length:function(){return a.tasks.length},running:function(){return i},idle:function(){return a.tasks.length+i===0},pause:function(){a.paused!==!0&&(a.paused=!0,a.process())},resume:function(){a.paused!==!1&&(a.paused=!1,a.process())}};return a},o.priorityQueue=function(t,n){function e(t,n){return t.priority-n.priority}function r(t,n,e){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);e(n,t[o])>=0?r=o:i=o-1}return r}function i(t,n,i,a){return t.started||(t.started=!0),u(n)||(n=[n]),0==n.length?o.setImmediate(function(){t.drain&&t.drain()}):void s(n,function(n){var u={data:n,priority:i,callback:"function"==typeof a?a:null};t.tasks.splice(r(t.tasks,u,e)+1,0,u),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}var a=o.queue(t,n);return a.push=function(t,n,e){i(a,t,n,e)},delete a.unshift,a},o.cargo=function(t,n){var e=!1,r=[],i={tasks:r,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,e){u(t)||(t=[t]),s(t,function(t){r.push({data:t,callback:"function"==typeof e?e:null}),i.drained=!1,i.saturated&&r.length===n&&i.saturated()}),o.setImmediate(i.process)},process:function a(){if(!e){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var o="number"==typeof n?r.splice(0,n):r.splice(0,r.length),u=c(o,function(t){return t.data});i.empty&&i.empty(),e=!0,t(u,function(){e=!1;var t=arguments;s(o,function(n){n.callback&&n.callback.apply(null,t)}),a()})}},length:function(){return r.length},running:function(){return e}};return i};var k=function(t){return function(n){var e=Array.prototype.slice.call(arguments,1);n.apply(null,e.concat([function(n){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[t]&&s(e,function(n){console[t](n)}))}]))}};o.log=k("log"),o.dir=k("dir"),o.memoize=function(t,n){var e={},r={};n=n||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),a=i.pop(),u=n.apply(null,i);u in e?o.nextTick(function(){a.apply(null,e[u])}):u in r?r[u].push(a):(r[u]=[a],t.apply(null,i.concat([function(){e[u]=arguments;var t=r[u];delete r[u];for(var n=0,i=t.length;i>n;n++)t[n].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=t,i},o.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},o.times=function(t,n,e){for(var r=[],i=0;t>i;i++)r.push(i);return o.map(r,n,e)},o.timesSeries=function(t,n,e){for(var r=[],i=0;t>i;i++)r.push(i);return o.mapSeries(r,n,e)},o.seq=function(){var t=arguments;return function(){var n=this,e=Array.prototype.slice.call(arguments),r=e.pop();o.reduce(t,e,function(t,e,r){e.apply(n,t.concat([function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);r(t,n)}]))},function(t,e){r.apply(n,[t].concat(e))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var O=function(t,n){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(n,function(t,n){t.apply(e,r.concat([n]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};o.applyEach=h(O),o.applyEachSeries=m(O),o.forever=function(t,n){function e(r){if(r){if(n)return n(r);throw r}t(e)}e()},"undefined"!=typeof n&&n.exports?n.exports=o:"undefined"!=typeof define&&define.amd?define([],function(){return o}):r.async=o}()}).call(this,t("_process"))},{_process:8}],6:[function(t,n){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}n.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var n,e,i,u,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw n=arguments[1],n instanceof Error?n:TypeError('Uncaught, unspecified "error" event.');if(e=this._events[t],a(e))return!1;if(r(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),s=1;i>s;s++)u[s-1]=arguments[s];e.apply(this,u)}else if(o(e)){for(i=arguments.length,u=new Array(i-1),s=1;i>s;s++)u[s-1]=arguments[s];for(c=e.slice(),i=c.length,s=0;i>s;s++)c[s].apply(this,u)}return!0},e.prototype.addListener=function(t,n){var i;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(n.listener)?n.listener:n),this._events[t]?o(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,o(this._events[t])&&!this._events[t].warned){var i;i=a(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,n){function e(){this.removeListener(t,e),i||(i=!0,n.apply(this,arguments))}if(!r(n))throw TypeError("listener must be a function");var i=!1;return e.listener=n,this.on(t,e),this},e.prototype.removeListener=function(t,n){var e,i,a,u;if(!r(n))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(e=this._events[t],a=e.length,i=-1,e===n||r(e.listener)&&e.listener===n)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,n);else if(o(e)){for(u=a;u-->0;)if(e[u]===n||e[u].listener&&e[u].listener===n){i=u;break}if(0>i)return this;1===e.length?(e.length=0,delete this._events[t]):e.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,n)}return this},e.prototype.removeAllListeners=function(t){var n,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[t],r(e))this.removeListener(t,e);else for(;e.length;)this.removeListener(t,e[e.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var n;return n=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,n){var e;return e=t._events&&t._events[n]?r(t._events[n])?1:t._events[n].length:0}},{}],7:[function(t,n){n.exports="function"==typeof Object.create?function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},{}],8:[function(t,n){function e(){}var r=n.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){var n=t.source;if((n===window||null===n)&&"process-tick"===t.data&&(t.stopPropagation(),e.length>0)){var r=e.shift();r()}},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=e,r.addListener=e,r.once=e,r.off=e,r.removeListener=e,r.removeAllListeners=e,r.emit=e,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(t,n){n.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],10:[function(t,n,e){(function(n,r){function i(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&e._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,n){var e=i.styles[n];return e?"["+i.colors[e][0]+"m"+t+"["+i.colors[e][1]+"m":t}function a(t){return t}function u(t){var n={};return t.forEach(function(t){n[t]=!0}),n}function s(t,n,r){if(t.customInspect&&n&&j(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return w(i)||(i=s(t,i,r)),i}var o=c(t,n);if(o)return o;var a=Object.keys(n),m=u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(j(n)){var v=n.name?": "+n.name:"";return t.stylize("[Function"+v+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var y="",g=!1,b=["{","}"];if(d(n)&&(g=!0,b=["[","]"]),j(n)){var _=n.name?": "+n.name:"";y=" [Function"+_+"]"}if(x(n)&&(y=" "+RegExp.prototype.toString.call(n)),O(n)&&(y=" "+Date.prototype.toUTCString.call(n)),E(n)&&(y=" "+l(n)),0===a.length&&(!g||0==n.length))return b[0]+y+b[1];if(0>r)return x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var k;return k=g?f(t,n,r,m,a):a.map(function(e){return p(t,n,r,m,e,g)}),t.seen.pop(),h(k,y,b)}function c(t,n){if(_(n))return t.stylize("undefined","undefined");if(w(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return g(n)?t.stylize(""+n,"number"):m(n)?t.stylize(""+n,"boolean"):v(n)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,n,e,r,i){for(var o=[],a=0,u=n.length;u>a;++a)o.push(L(n,String(a))?p(t,n,e,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,n,e,r,i,!0))}),o}function p(t,n,e,r,i,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),L(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=v(e)?s(t,c.value,null):s(t,c.value,e-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function h(t,n,e){var r=0,i=t.reduce(function(t,n){return r++,n.indexOf("\n")>=0&&r++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function g(t){return"number"==typeof t}function w(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function _(t){return void 0===t}function x(t){return k(t)&&"[object RegExp]"===S(t)}function k(t){return"object"==typeof t&&null!==t}function O(t){return k(t)&&"[object Date]"===S(t)}function E(t){return k(t)&&("[object Error]"===S(t)||t instanceof Error)}function j(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function T(t){return 10>t?"0"+t.toString(10):t.toString(10)}function M(){var t=new Date,n=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],n].join(" ")}function L(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var R=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(i(arguments[e]));return n.join(" ")}for(var e=1,r=arguments,o=r.length,a=String(t).replace(R,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(n){return"[Circular]"}default:return t}}),u=r[e];o>e;u=r[++e])a+=v(u)||!k(u)?" "+u:" "+i(u);return a},e.deprecate=function(t,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(_(r.process))return function(){return e.deprecate(t,i).apply(this,arguments)};if(n.noDeprecation===!0)return t;var a=!1;return o};var D,F={};e.debuglog=function(t){if(_(D)&&(D=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(D)){var r=n.pid;F[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else F[t]=function(){};return F[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=m,e.isNull=v,e.isNullOrUndefined=y,e.isNumber=g,e.isString=w,e.isSymbol=b,e.isUndefined=_,e.isRegExp=x,e.isObject=k,e.isDate=O,e.isError=E,e.isFunction=j,e.isPrimitive=A,e.isBuffer=t("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",M(),e.format.apply(e,arguments))},e.inherits=t("inherits"),e._extend=function(t,n){if(!n||!k(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(t,n){!function(t,n,e,r,i,o){function a(t,n){var e=typeof t[n];return"function"==e||!("object"!=e||!t[n])||"unknown"==e}function u(t,n){return!("object"!=typeof t[n]||!t[n])}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(){var t="Shockwave Flash",n="application/x-shockwave-flash";if(!w(navigator.plugins)&&"object"==typeof navigator.plugins[t]){var e=navigator.plugins[t].description;e&&!w(navigator.mimeTypes)&&navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin&&(S=e.match(/\d+/g))}if(!S){var r;try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),S=Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),r=null}catch(i){}}if(!S)return!1;var o=parseInt(S[0],10),a=parseInt(S[1],10);return T=o>9&&a>0,!0}function l(){if(!X){X=!0;for(var t=0;t<J.length;t++)J[t]();J.length=0}}function f(t,n){return X?void t.call(n):void J.push(function(){t.call(n)})}function p(){var t=parent;if(""!==I)for(var n=0,e=I.split(".");n<e.length;n++)t=t[e[n]];return t.easyXDM}function h(n){return t.easyXDM=H,I=n,I&&(q="easyXDM_"+I.replace(".","_")+"_"),P}function d(t){return t.match(C)[3]}function m(t){return t.match(C)[4]||""}function v(t){var n=t.toLowerCase().match(C),e=n[2],r=n[3],i=n[4]||"";return("http:"==e&&":80"==i||"https:"==e&&":443"==i)&&(i=""),e+"//"+r+i}function y(t){if(t=t.replace(z,"$1/"),!t.match(/^(http||https):\/\//)){var n="/"===t.substring(0,1)?"":e.pathname;"/"!==n.substring(n.length-1)&&(n=n.substring(0,n.lastIndexOf("/")+1)),t=e.protocol+"//"+e.host+n+t}for(;N.test(t);)t=t.replace(N,"");return t}function g(t,n){var e="",r=t.indexOf("#");-1!==r&&(e=t.substring(r),t=t.substring(0,r));var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(a+"="+o(n[a]));return t+(B?"#":-1==t.indexOf("?")?"?":"&")+i.join("&")+e}function w(t){return"undefined"==typeof t}function b(t,n,e){var r;for(var i in n)n.hasOwnProperty(i)&&(i in t?(r=n[i],"object"==typeof r?b(t[i],r,e):e||(t[i]=n[i])):t[i]=n[i]);return t}function _(){var t=n.body.appendChild(n.createElement("form")),e=t.appendChild(n.createElement("input"));e.name=q+"TEST"+D,A=e!==t.elements[e.name],n.body.removeChild(t)}function x(t){w(A)&&_();var e;A?e=n.createElement('<iframe name="'+t.props.name+'"/>'):(e=n.createElement("IFRAME"),e.name=t.props.name),e.id=e.name=t.props.name,delete t.props.name,"string"==typeof t.container&&(t.container=n.getElementById(t.container)),t.container||(b(e.style,{position:"absolute",top:"-2000px",left:"0px"}),t.container=n.body);
var r=t.props.src;if(t.props.src="javascript:false",b(e,t.props),e.border=e.frameBorder=0,e.allowTransparency=!0,t.container.appendChild(e),t.onLoad&&M(e,"load",t.onLoad),t.usePost){var i,o=t.container.appendChild(n.createElement("form"));if(o.target=e.name,o.action=r,o.method="POST","object"==typeof t.usePost)for(var a in t.usePost)t.usePost.hasOwnProperty(a)&&(A?i=n.createElement('<input name="'+a+'"/>'):(i=n.createElement("INPUT"),i.name=a),i.value=t.usePost[a],o.appendChild(i));o.submit(),o.parentNode.removeChild(o)}else e.src=r;return t.props.src=r,e}function k(t,n){"string"==typeof t&&(t=[t]);for(var e,r=t.length;r--;)if(e=t[r],e=new RegExp("^"==e.substr(0,1)?e:"^"+e.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),e.test(n))return!0;return!1}function O(r){var i,o=r.protocol;if(r.isHost=r.isHost||w($.xdm_p),B=r.hash||!1,r.props||(r.props={}),r.isHost)r.remote=y(r.remote),r.channel=r.channel||"default"+D++,r.secret=Math.random().toString(16).substring(2),w(o)&&(o=v(e.href)==v(r.remote)?"4":a(t,"postMessage")||a(n,"postMessage")?"1":r.swf&&a(t,"ActiveXObject")&&c()?"6":"Gecko"===navigator.product&&"frameElement"in t&&-1==navigator.userAgent.indexOf("WebKit")?"5":r.remoteHelper?"2":"0");else if(r.channel=$.xdm_c.replace(/["'<>\\]/g,""),r.secret=$.xdm_s,r.remote=$.xdm_e.replace(/["'<>\\]/g,""),o=$.xdm_p,r.acl&&!k(r.acl,r.remote))throw new Error("Access denied for "+r.remote);switch(r.protocol=o,o){case"0":if(b(r,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),r.isHost){if(!r.local){for(var u,s=e.protocol+"//"+e.host,l=n.body.getElementsByTagName("img"),f=l.length;f--;)if(u=l[f],u.src.substring(0,s.length)===s){r.local=u.src;break}r.local||(r.local=t)}var p={xdm_c:r.channel,xdm_p:0};r.local===t?(r.usePolling=!0,r.useParent=!0,r.local=e.protocol+"//"+e.host+e.pathname+e.search,p.xdm_e=r.local,p.xdm_pa=1):p.xdm_e=y(r.local),r.container&&(r.useResize=!1,p.xdm_po=1),r.remote=g(r.remote,p)}else b(r,{channel:$.xdm_c,remote:$.xdm_e,useParent:!w($.xdm_pa),usePolling:!w($.xdm_po),useResize:r.useParent?!1:r.useResize});i=[new P.stack.HashTransport(r),new P.stack.ReliableBehavior({}),new P.stack.QueueBehavior({encode:!0,maxLength:4e3-r.remote.length}),new P.stack.VerifyBehavior({initiate:r.isHost})];break;case"1":i=[new P.stack.PostMessageTransport(r)];break;case"2":r.isHost&&(r.remoteHelper=y(r.remoteHelper)),i=[new P.stack.NameTransport(r),new P.stack.QueueBehavior,new P.stack.VerifyBehavior({initiate:r.isHost})];break;case"3":i=[new P.stack.NixTransport(r)];break;case"4":i=[new P.stack.SameOriginTransport(r)];break;case"5":i=[new P.stack.FrameElementTransport(r)];break;case"6":S||c(),i=[new P.stack.FlashTransport(r)]}return i.push(new P.stack.QueueBehavior({lazy:r.lazy,remove:!0})),i}function E(t){for(var n,e={incoming:function(t,n){this.up.incoming(t,n)},outgoing:function(t,n){this.down.outgoing(t,n)},callback:function(t){this.up.callback(t)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},r=0,i=t.length;i>r;r++)n=t[r],b(n,e,!0),0!==r&&(n.down=t[r-1]),r!==i-1&&(n.up=t[r+1]);return n}function j(t){t.up.down=t.down,t.down.up=t.up,t.up=t.down=null}var A,S,T,M,L,R=this,D=Math.floor(1e4*Math.random()),F=Function.prototype,C=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,N=/[\-\w]+\/\.\.\//,z=/([^:])\/\//g,I="",P={},H=t.easyXDM,q="easyXDM_",B=!1;if(a(t,"addEventListener"))M=function(t,n,e){t.addEventListener(n,e,!1)},L=function(t,n,e){t.removeEventListener(n,e,!1)};else{if(!a(t,"attachEvent"))throw new Error("Browser not supported");M=function(t,n,e){t.attachEvent("on"+n,e)},L=function(t,n,e){t.detachEvent("on"+n,e)}}var U,X=!1,J=[];if("readyState"in n?(U=n.readyState,X="complete"==U||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==U||"interactive"==U)):X=!!n.body,!X){if(a(t,"addEventListener"))M(n,"DOMContentLoaded",l);else if(M(n,"readystatechange",function(){"complete"==n.readyState&&l()}),n.documentElement.doScroll&&t===top){var W=function(){if(!X){try{n.documentElement.doScroll("left")}catch(t){return void r(W,1)}l()}};W()}M(t,"load",l)}var $=function(t){t=t.substring(1).split("&");for(var n,e={},r=t.length;r--;)n=t[r].split("="),e[n[0]]=i(n[1]);return e}(/xdm_e=/.test(e.search)?e.search:e.hash),G=function(){var t={},n={a:[1,2,3]},e='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(n).replace(/\s/g,"")===e?JSON:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===e&&(t.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(n=e.evalJSON(),n.a&&3===n.a.length&&3===n.a[2]&&(t.parse=function(t){return t.evalJSON()})),t.stringify&&t.parse?(G=function(){return t},t):null)};b(P,{version:"2.4.19.3",query:$,stack:{},apply:b,getJSONObject:G,whenReady:f,noConflict:h}),P.DomHelper={on:M,un:L,requiresJSON:function(e){u(t,"JSON")||n.write('<script type="text/javascript" src="'+e+'"></script>')}},function(){var t={};P.Fn={set:function(n,e){t[n]=e},get:function(n,e){if(t.hasOwnProperty(n)){var r=t[n];return e&&delete t[n],r}}}}(),P.Socket=function(t){var n=E(O(t).concat([{incoming:function(n,e){t.onMessage(n,e)},callback:function(n){t.onReady&&t.onReady(n)}}])),e=v(t.remote);this.origin=v(t.remote),this.destroy=function(){n.destroy()},this.postMessage=function(t){n.outgoing(t,e)},n.init()},P.Rpc=function(t,n){if(n.local)for(var e in n.local)if(n.local.hasOwnProperty(e)){var r=n.local[e];"function"==typeof r&&(n.local[e]={method:r})}var i=E(O(t).concat([new P.stack.RpcBehavior(this,n),{callback:function(n){t.onReady&&t.onReady(n)}}]));this.origin=v(t.remote),this.destroy=function(){i.destroy()},i.init()},P.stack.SameOriginTransport=function(t){var n,i,o,a;return n={outgoing:function(t,n,e){o(t),e&&e()},destroy:function(){i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){a=v(t.remote),t.isHost?(b(t.props,{src:g(t.remote,{xdm_e:e.protocol+"//"+e.host+e.pathname,xdm_c:t.channel,xdm_p:4}),name:q+t.channel+"_provider"}),i=x(t),P.Fn.set(t.channel,function(t){return o=t,r(function(){n.up.callback(!0)},0),function(t){n.up.incoming(t,a)}})):(o=p().Fn.get(t.channel,!0)(function(t){n.up.incoming(t,a)}),r(function(){n.up.callback(!0)},0))},init:function(){f(n.onDOMReady,n)}}},P.stack.FlashTransport=function(t){function i(t){r(function(){u.up.incoming(t,c)},0)}function a(e){var r=t.swf+"?host="+t.isHost,i="easyXDM_swf_"+Math.floor(1e4*Math.random());P.Fn.set("flash_loaded"+e.replace(/[\-.]/g,"_"),function(){P.stack.FlashTransport[e].swf=l=p.firstChild;for(var t=P.stack.FlashTransport[e].queue,n=0;n<t.length;n++)t[n]();t.length=0}),t.swfContainer?p="string"==typeof t.swfContainer?n.getElementById(t.swfContainer):t.swfContainer:(p=n.createElement("div"),b(p.style,T&&t.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),n.body.appendChild(p));var a="callback=flash_loaded"+o(e.replace(/[\-.]/g,"_"))+"&proto="+R.location.protocol+"&domain="+o(d(R.location.href))+"&port="+o(m(R.location.href))+"&ns="+o(I);p.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+i+"' data='"+r+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+r+"'></param><param name='flashvars' value='"+a+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+a+"' allowScriptAccess='always' wmode='transparent' src='"+r+"' height='1' width='1'></embed></object>"}var u,s,c,l,p;return u={outgoing:function(n,e,r){l.postMessage(t.channel,n.toString()),r&&r()},destroy:function(){try{l.destroyChannel(t.channel)}catch(n){}l=null,s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){c=t.remote,P.Fn.set("flash_"+t.channel+"_init",function(){r(function(){u.up.callback(!0)})}),P.Fn.set("flash_"+t.channel+"_onMessage",i),t.swf=y(t.swf);var n=d(t.swf),o=function(){P.stack.FlashTransport[n].init=!0,l=P.stack.FlashTransport[n].swf,l.createChannel(t.channel,t.secret,v(t.remote),t.isHost),t.isHost&&(T&&t.swfNoThrottle&&b(t.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),b(t.props,{src:g(t.remote,{xdm_e:v(e.href),xdm_c:t.channel,xdm_p:6,xdm_s:t.secret}),name:q+t.channel+"_provider"}),s=x(t))};P.stack.FlashTransport[n]&&P.stack.FlashTransport[n].init?o():P.stack.FlashTransport[n]?P.stack.FlashTransport[n].queue.push(o):(P.stack.FlashTransport[n]={queue:[o]},a(n))},init:function(){f(u.onDOMReady,u)}}},P.stack.PostMessageTransport=function(n){function i(t){if(t.origin)return v(t.origin);if(t.uri)return v(t.uri);if(t.domain)return e.protocol+"//"+t.domain;throw"Unable to retrieve the origin of the event"}function o(t){var e=i(t);e==c&&t.data.substring(0,n.channel.length+1)==n.channel+" "&&a.up.incoming(t.data.substring(n.channel.length+1),e)}var a,u,s,c;return a={outgoing:function(t,e,r){s.postMessage(n.channel+" "+t,e||c),r&&r()},destroy:function(){L(t,"message",o),u&&(s=null,u.parentNode.removeChild(u),u=null)},onDOMReady:function(){if(c=v(n.remote),n.isHost){var i=function(e){e.data==n.channel+"-ready"&&(s="postMessage"in u.contentWindow?u.contentWindow:u.contentWindow.document,L(t,"message",i),M(t,"message",o),r(function(){a.up.callback(!0)},0))};M(t,"message",i),b(n.props,{src:g(n.remote,{xdm_e:v(e.href),xdm_c:n.channel,xdm_p:1}),name:q+n.channel+"_provider"}),u=x(n)}else M(t,"message",o),s="postMessage"in t.parent?t.parent:t.parent.document,s.postMessage(n.channel+"-ready",c),r(function(){a.up.callback(!0)},0)},init:function(){f(a.onDOMReady,a)}}},P.stack.FrameElementTransport=function(i){var o,a,u,s;return o={outgoing:function(t,n,e){u.call(this,t),e&&e()},destroy:function(){a&&(a.parentNode.removeChild(a),a=null)},onDOMReady:function(){s=v(i.remote),i.isHost?(b(i.props,{src:g(i.remote,{xdm_e:v(e.href),xdm_c:i.channel,xdm_p:5}),name:q+i.channel+"_provider"}),a=x(i),a.fn=function(t){return delete a.fn,u=t,r(function(){o.up.callback(!0)},0),function(t){o.up.incoming(t,s)}}):(n.referrer&&v(n.referrer)!=$.xdm_e&&(t.top.location=$.xdm_e),u=t.frameElement.fn(function(t){o.up.incoming(t,s)}),o.up.callback(!0))},init:function(){f(o.onDOMReady,o)}}},P.stack.NameTransport=function(t){function n(n){var e=t.remoteHelper+(u?"#_3":"#_2")+t.channel;s.contentWindow.sendMessage(n,e)}function e(){u?2!==++l&&u||a.up.callback(!0):(n("ready"),a.up.callback(!0))}function i(t){a.up.incoming(t,h)}function o(){p&&r(function(){p(!0)},0)}var a,u,s,c,l,p,h,d;return a={outgoing:function(t,e,r){p=r,n(t)},destroy:function(){s.parentNode.removeChild(s),s=null,u&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){u=t.isHost,l=0,h=v(t.remote),t.local=y(t.local),u?(P.Fn.set(t.channel,function(n){u&&"ready"===n&&(P.Fn.set(t.channel,i),e())}),d=g(t.remote,{xdm_e:t.local,xdm_c:t.channel,xdm_p:2}),b(t.props,{src:d+"#"+t.channel,name:q+t.channel+"_provider"}),c=x(t)):(t.remoteHelper=t.remote,P.Fn.set(t.channel,i));var n=function(){var i=s||this;L(i,"load",n),P.Fn.set(t.channel+"_load",o),function a(){"function"==typeof i.contentWindow.sendMessage?e():r(a,50)}()};s=x({props:{src:t.local+"#_4"+t.channel},onLoad:n})},init:function(){f(a.onDOMReady,a)}}},P.stack.HashTransport=function(n){function e(t){if(m){var e=n.remote+"#"+h++ +"_"+t;(s||!y?m.contentWindow:m).location=e}}function i(t){p=t,u.up.incoming(p.substring(p.indexOf("_")+1),g)}function o(){if(d){var t=d.location.href,n="",e=t.indexOf("#");-1!=e&&(n=t.substring(e)),n&&n!=p&&i(n)}}function a(){c=setInterval(o,l)}var u,s,c,l,p,h,d,m,y,g;return u={outgoing:function(t){e(t)},destroy:function(){t.clearInterval(c),(s||!y)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){if(s=n.isHost,l=n.interval,p="#"+n.channel,h=0,y=n.useParent,g=v(n.remote),s){if(b(n.props,{src:n.remote,name:q+n.channel+"_provider"}),y)n.onLoad=function(){d=t,a(),u.up.callback(!0)};else{var e=0,i=n.delay/50;!function o(){if(++e>i)throw new Error("Unable to reference listenerwindow");try{d=m.contentWindow.frames[q+n.channel+"_consumer"]}catch(t){}d?(a(),u.up.callback(!0)):r(o,50)}()}m=x(n)}else d=t,a(),y?(m=parent,u.up.callback(!0)):(b(n,{props:{src:n.remote+"#"+n.channel+new Date,name:q+n.channel+"_consumer"},onLoad:function(){u.up.callback(!0)}}),m=x(n))},init:function(){f(u.onDOMReady,u)}}},P.stack.ReliableBehavior=function(){var t,n,e=0,r=0,i="";return t={incoming:function(o,a){var u=o.indexOf("_"),s=o.substring(0,u).split(",");o=o.substring(u+1),s[0]==e&&(i="",n&&n(!0)),o.length>0&&(t.down.outgoing(s[1]+","+e+"_"+i,a),r!=s[1]&&(r=s[1],t.up.incoming(o,a)))},outgoing:function(o,a,u){i=o,n=u,t.down.outgoing(r+","+ ++e+"_"+o,a)}}},P.stack.QueueBehavior=function(t){function n(){if(t.remove&&0===u.length)return void j(e);if(!s&&0!==u.length&&!a){s=!0;var i=u.shift();e.down.outgoing(i.data,i.origin,function(t){s=!1,i.callback&&r(function(){i.callback(t)},0),n()})}}var e,a,u=[],s=!0,c="",l=0,f=!1,p=!1;return e={init:function(){w(t)&&(t={}),t.maxLength&&(l=t.maxLength,p=!0),t.lazy?f=!0:e.down.init()},callback:function(t){s=!1;var r=e.up;n(),r.callback(t)},incoming:function(n,r){if(p){var o=n.indexOf("_"),a=parseInt(n.substring(0,o),10);c+=n.substring(o+1),0===a&&(t.encode&&(c=i(c)),e.up.incoming(c,r),c="")}else e.up.incoming(n,r)},outgoing:function(r,i,a){t.encode&&(r=o(r));var s,c=[];if(p){for(;0!==r.length;)s=r.substring(0,l),r=r.substring(s.length),c.push(s);for(;s=c.shift();)u.push({data:c.length+"_"+s,origin:i,callback:0===c.length?a:null})}else u.push({data:r,origin:i,callback:a});f?e.down.init():n()},destroy:function(){a=!0,e.down.destroy()}}},P.stack.VerifyBehavior=function(t){function n(){r=Math.random().toString(16).substring(2),e.down.outgoing(r)}var e,r,i;return e={incoming:function(o,a){var u=o.indexOf("_");-1===u?o===r?e.up.callback(!0):i||(i=o,t.initiate||n(),e.down.outgoing(o)):o.substring(0,u)===i&&e.up.incoming(o.substring(u+1),a)},outgoing:function(t,n,i){e.down.outgoing(r+"_"+t,n,i)},callback:function(){t.initiate&&n()}}},P.stack.RpcBehavior=function(t,n){function e(t){t.jsonrpc="2.0",o.down.outgoing(a.stringify(t))}function r(t,n){var r=Array.prototype.slice;return function(){var i,o=arguments.length,a={method:n};o>0&&"function"==typeof arguments[o-1]?(o>1&&"function"==typeof arguments[o-2]?(i={success:arguments[o-2],error:arguments[o-1]},a.params=r.call(arguments,0,o-2)):(i={success:arguments[o-1]},a.params=r.call(arguments,0,o-1)),c[""+ ++u]=i,a.id=u):a.params=r.call(arguments,0),t.namedParams&&1===a.params.length&&(a.params=a.params[0]),e(a)}}function i(t,n,r,i){if(!r)return void(n&&e({id:n,error:{code:-32601,message:"Procedure not found."}}));var o,a;n?(o=function(t){o=F,e({id:n,result:t})},a=function(t,r){a=F;var i={id:n,error:{code:-32099,message:t}};r&&(i.error.data=r),e(i)}):o=a=F,s(i)||(i=[i]);try{var u=r.method.apply(r.scope,i.concat([o,a]));w(u)||o(u)}catch(c){a(c.message)}}var o,a=n.serializer||G(),u=0,c={};return o={incoming:function(t){var r=a.parse(t);if(r.method)n.handle?n.handle(r,e):i(r.method,r.id,n.local[r.method],r.params);else{var o=c[r.id];r.error?o.error&&o.error(r.error):o.success&&o.success(r.result),delete c[r.id]}},init:function(){if(n.remote)for(var e in n.remote)n.remote.hasOwnProperty(e)&&(t[e]=r(n.remote[e],e));o.down.init()},destroy:function(){for(var e in n.remote)n.remote.hasOwnProperty(e)&&t.hasOwnProperty(e)&&delete t[e];o.down.destroy()}}},R.easyXDM=P}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),n&&void 0!==n.exports&&(n.exports.easyXDM=window.easyXDM)},{}],12:[function(t,n){function e(){}function r(t){var n={}.toString.call(t);switch(n){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(){if(v.XMLHttpRequest&&("file:"!=v.location.protocol||!v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function o(t){return t===Object(t)}function a(t){if(!o(t))return t;var n=[];for(var e in t)null!=t[e]&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")}function u(t){for(var n,e,r={},i=t.split("&"),o=0,a=i.length;a>o;++o)e=i[o],n=e.split("="),r[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);return r}function s(t){var n,e,r,i,o=t.split(/\r?\n/),a={};o.pop();for(var u=0,s=o.length;s>u;++u)e=o[u],n=e.indexOf(":"),r=e.slice(0,n).toLowerCase(),i=y(e.slice(n+1)),a[r]=i;return a}function c(t){return t.split(/ *; */).shift()}function l(t){return m(t.split(/ *; */),function(t,n){var e=n.split(/ *= */),r=e.shift(),i=e.shift();return r&&i&&(t[r]=i),t},{})}function f(t,n){n=n||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function p(t,n){var e=this;d.call(this),this._query=this._query||[],this.method=t,this.url=n,this.header={},this._header={},this.on("end",function(){var n=new f(e);"HEAD"==t&&(n.text=null),e.callback(null,n)})}function h(t,n){return"function"==typeof n?new p("GET",t).end(n):1==arguments.length?new p("GET",t):new p(t,n)}var d=t("emitter"),m=t("reduce"),v="undefined"==typeof window?this:window,y="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};h.serializeObject=a,h.parseString=u,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},f.prototype.get=function(t){return this.header[t.toLowerCase()]},f.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=c(t);var n=l(t);for(var e in n)this[e]=n[e]},f.prototype.parseBody=function(t){var n=h.parse[this.type];return n?n(t):null},f.prototype.setStatusProperties=function(t){var n=t/100|0;this.status=t,this.statusType=n,this.info=1==n,this.ok=2==n,this.clientError=4==n,this.serverError=5==n,this.error=4==n||5==n?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},f.prototype.toError=function(){var t=this.req,n=t.method,e=t.url,r="cannot "+n+" "+e+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=n,i.url=e,i},h.Response=f,d(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,n){if(o(t)){for(var e in t)this.set(e,t[e]);return this}return this._header[t.toLowerCase()]=n,this.header[t]=n,this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",h.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",h.types[t]||t),this},p.prototype.auth=function(t,n){var e=btoa(t+":"+n);return this.set("Authorization","Basic "+e),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},p.prototype.field=function(t,n){return this._formData||(this._formData=new FormData),this._formData.append(t,n),this},p.prototype.attach=function(t,n,e){return this._formData||(this._formData=new FormData),this._formData.append(t,n,e),this},p.prototype.send=function(t){var n=o(t),e=this.getHeader("Content-Type");if(n&&o(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(e||this.type("form"),e=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==e?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return n?(e||this.type("json"),this):this},p.prototype.callback=function(t,n){var e=this._callback;return 2==e.length?e(t,n):t?this.emit("error",t):void e(n)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,n=new Error("timeout of "+t+"ms exceeded");n.timeout=t,this.callback(n)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var n=this,o=this.xhr=i(),a=this._query.join("&"),u=this._timeout,s=this._formData||this._data;if(this._callback=t||e,o.onreadystatechange=function(){return 4==o.readyState?0==o.status?n.aborted?n.timeoutError():n.crossDomainError():void n.emit("end"):void 0},o.upload&&(o.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,n.emit("progress",t)}),u&&!this._timer&&(this._timer=setTimeout(function(){n.abort()},u)),a&&(a=h.serializeObject(a),this.url+=~this.url.indexOf("?")?"&"+a:"?"+a),o.open(this.method,this.url,!0),this._withCredentials&&(o.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!r(s)){var c=h.serialize[this.getHeader("Content-Type")];c&&(s=c(s))}for(var l in this.header)null!=this.header[l]&&o.setRequestHeader(l,this.header[l]);return this.emit("request",this),o.send(s),this},h.Request=p,h.get=function(t,n,e){var r=h("GET",t);return"function"==typeof n&&(e=n,n=null),n&&r.query(n),e&&r.end(e),r},h.head=function(t,n,e){var r=h("HEAD",t);return"function"==typeof n&&(e=n,n=null),n&&r.send(n),e&&r.end(e),r},h.del=function(t,n){var e=h("DELETE",t);return n&&e.end(n),e},h.patch=function(t,n,e){var r=h("PATCH",t);return"function"==typeof n&&(e=n,n=null),n&&r.send(n),e&&r.end(e),r},h.post=function(t,n,e){var r=h("POST",t);return"function"==typeof n&&(e=n,n=null),n&&r.send(n),e&&r.end(e),r},h.put=function(t,n,e){var r=h("PUT",t);return"function"==typeof n&&(e=n,n=null),n&&r.send(n),e&&r.end(e),r},n.exports=h},{emitter:13,reduce:14}],13:[function(t,n){function e(t){return t?r(t):void 0}function r(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}n.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(n),this},e.prototype.once=function(t,n){function e(){r.off(t,e),n.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},e.fn=n,this.on(t,e),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks[t];if(!e)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<e.length;i++)if(r=e[i],r===n||r.fn===n){e.splice(i,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var n=[].slice.call(arguments,1),e=this._callbacks[t];if(e){e=e.slice(0);for(var r=0,i=e.length;i>r;++r)e[r].apply(this,n)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],14:[function(t,n){n.exports=function(t,n,e){for(var r=0,i=t.length,o=3==arguments.length?e:t[r++];i>r;)o=n.call(null,o,t[r],++r,t);return o}},{}],15:[function(t,n,e){(function(){var t=this,r=t._,i={},o=Array.prototype,a=Object.prototype,u=Function.prototype,s=o.push,c=o.slice,l=o.concat,f=a.toString,p=a.hasOwnProperty,h=o.forEach,d=o.map,m=o.reduce,v=o.reduceRight,y=o.filter,g=o.every,w=o.some,b=o.indexOf,_=o.lastIndexOf,x=Array.isArray,k=Object.keys,O=u.bind,E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=E),e._=E):t._=E,E.VERSION="1.6.0";var j=E.each=E.forEach=function(t,n,e){if(null==t)return t;if(h&&t.forEach===h)t.forEach(n,e);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(n.call(e,t[r],r,t)===i)return}else for(var a=E.keys(t),r=0,o=a.length;o>r;r++)if(n.call(e,t[a[r]],a[r],t)===i)return;return t};E.map=E.collect=function(t,n,e){var r=[];return null==t?r:d&&t.map===d?t.map(n,e):(j(t,function(t,i,o){r.push(n.call(e,t,i,o))}),r)};var A="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return r&&(n=E.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(j(t,function(t,o,a){i?e=n.call(r,e,t,o,a):(e=t,i=!0)}),!i)throw new TypeError(A);return e},E.reduceRight=E.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduceRight===v)return r&&(n=E.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var o=t.length;if(o!==+o){var a=E.keys(t);o=a.length}if(j(t,function(u,s,c){s=a?a[--o]:--o,i?e=n.call(r,e,t[s],s,c):(e=t[s],i=!0)}),!i)throw new TypeError(A);return e},E.find=E.detect=function(t,n,e){var r;return S(t,function(t,i,o){return n.call(e,t,i,o)?(r=t,!0):void 0}),r},E.filter=E.select=function(t,n,e){var r=[];return null==t?r:y&&t.filter===y?t.filter(n,e):(j(t,function(t,i,o){n.call(e,t,i,o)&&r.push(t)}),r)},E.reject=function(t,n,e){return E.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},E.every=E.all=function(t,n,e){n||(n=E.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(n,e):(j(t,function(t,o,a){return(r=r&&n.call(e,t,o,a))?void 0:i}),!!r)};var S=E.some=E.any=function(t,n,e){n||(n=E.identity);var r=!1;return null==t?r:w&&t.some===w?t.some(n,e):(j(t,function(t,o,a){return r||(r=n.call(e,t,o,a))?i:void 0}),!!r)};E.contains=E.include=function(t,n){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(n):S(t,function(t){return t===n})},E.invoke=function(t,n){var e=c.call(arguments,2),r=E.isFunction(n);return E.map(t,function(t){return(r?n:t[n]).apply(t,e)})},E.pluck=function(t,n){return E.map(t,E.property(n))},E.where=function(t,n){return E.filter(t,E.matches(n))},E.findWhere=function(t,n){return E.find(t,E.matches(n))},E.max=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return j(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;u>i&&(r=t,i=u)}),r},E.min=function(t,n,e){if(!n&&E.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return j(t,function(t,o,a){var u=n?n.call(e,t,o,a):t;i>u&&(r=t,i=u)}),r},E.shuffle=function(t){var n,e=0,r=[];return j(t,function(t){n=E.random(e++),r[e-1]=r[n],r[n]=t}),r},E.sample=function(t,n,e){return null==n||e?(t.length!==+t.length&&(t=E.values(t)),t[E.random(t.length-1)]):E.shuffle(t).slice(0,Math.max(0,n))};var T=function(t){return null==t?E.identity:E.isFunction(t)?t:E.property(t)};E.sortBy=function(t,n,e){return n=T(n),E.pluck(E.map(t,function(t,r,i){return{value:t,index:r,criteria:n.call(e,t,r,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var M=function(t){return function(n,e,r){var i={};return e=T(e),j(n,function(o,a){var u=e.call(r,o,a,n);t(i,u,o)}),i}};E.groupBy=M(function(t,n,e){E.has(t,n)?t[n].push(e):t[n]=[e]}),E.indexBy=M(function(t,n,e){t[n]=e}),E.countBy=M(function(t,n){E.has(t,n)?t[n]++:t[n]=1}),E.sortedIndex=function(t,n,e,r){e=T(e);for(var i=e.call(r,n),o=0,a=t.length;a>o;){var u=o+a>>>1;e.call(r,t[u])<i?o=u+1:a=u}return o},E.toArray=function(t){return t?E.isArray(t)?c.call(t):t.length===+t.length?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:t.length===+t.length?t.length:E.keys(t).length},E.first=E.head=E.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:0>n?[]:c.call(t,0,n)},E.initial=function(t,n,e){return c.call(t,0,t.length-(null==n||e?1:n))},E.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:c.call(t,Math.max(t.length-n,0))},E.rest=E.tail=E.drop=function(t,n,e){return c.call(t,null==n||e?1:n)},E.compact=function(t){return E.filter(t,E.identity)};var L=function(t,n,e){return n&&E.every(t,E.isArray)?l.apply(e,t):(j(t,function(t){E.isArray(t)||E.isArguments(t)?n?s.apply(e,t):L(t,n,e):e.push(t)}),e)};E.flatten=function(t,n){return L(t,n,[])},E.without=function(t){return E.difference(t,c.call(arguments,1))},E.partition=function(t,n){var e=[],r=[];return j(t,function(t){(n(t)?e:r).push(t)}),[e,r]},E.uniq=E.unique=function(t,n,e,r){E.isFunction(n)&&(r=e,e=n,n=!1);var i=e?E.map(t,e,r):t,o=[],a=[];return j(i,function(e,r){(n?r&&a[a.length-1]===e:E.contains(a,e))||(a.push(e),o.push(t[r]))}),o},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(t){var n=c.call(arguments,1);return E.filter(E.uniq(t),function(t){return E.every(n,function(n){return E.contains(n,t)})})},E.difference=function(t){var n=l.apply(o,c.call(arguments,1));return E.filter(t,function(t){return!E.contains(n,t)})},E.zip=function(){for(var t=E.max(E.pluck(arguments,"length").concat(0)),n=new Array(t),e=0;t>e;e++)n[e]=E.pluck(arguments,""+e);return n},E.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},E.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=E.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(b&&t.indexOf===b)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},E.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},E.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=e;return o};var R=function(){};E.bind=function(t,n){var e,r;if(O&&t.bind===O)return O.apply(t,c.call(arguments,1));if(!E.isFunction(t))throw new TypeError;return e=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(n,e.concat(c.call(arguments)));R.prototype=t.prototype;var i=new R;R.prototype=null;var o=t.apply(i,e.concat(c.call(arguments)));return Object(o)===o?o:i}},E.partial=function(t){var n=c.call(arguments,1);return function(){for(var e=0,r=n.slice(),i=0,o=r.length;o>i;i++)r[i]===E&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return t.apply(this,r)}},E.bindAll=function(t){var n=c.call(arguments,1);if(0===n.length)throw new Error("bindAll must be passed function names");return j(n,function(n){t[n]=E.bind(t[n],t)}),t},E.memoize=function(t,n){var e={};return n||(n=E.identity),function(){var r=n.apply(this,arguments);return E.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},E.delay=function(t,n){var e=c.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},E.defer=function(t){return E.delay.apply(E,[t,1].concat(c.call(arguments,1)))},E.throttle=function(t,n,e){var r,i,o,a=null,u=0;e||(e={});var s=function(){u=e.leading===!1?0:E.now(),a=null,o=t.apply(r,i),r=i=null};return function(){var c=E.now();u||e.leading!==!1||(u=c);var l=n-(c-u);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,u=c,o=t.apply(r,i),r=i=null):a||e.trailing===!1||(a=setTimeout(s,l)),o}},E.debounce=function(t,n,e){var r,i,o,a,u,s=function(){var c=E.now()-a;n>c?r=setTimeout(s,n-c):(r=null,e||(u=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=E.now();var c=e&&!r;return r||(r=setTimeout(s,n)),c&&(u=t.apply(o,i),o=i=null),u}},E.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},E.wrap=function(t,n){return E.partial(n,t)},E.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},E.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0
}},E.keys=function(t){if(!E.isObject(t))return[];if(k)return k(t);var n=[];for(var e in t)E.has(t,e)&&n.push(e);return n},E.values=function(t){for(var n=E.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},E.pairs=function(t){for(var n=E.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},E.invert=function(t){for(var n={},e=E.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},E.functions=E.methods=function(t){var n=[];for(var e in t)E.isFunction(t[e])&&n.push(e);return n.sort()},E.extend=function(t){return j(c.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},E.pick=function(t){var n={},e=l.apply(o,c.call(arguments,1));return j(e,function(e){e in t&&(n[e]=t[e])}),n},E.omit=function(t){var n={},e=l.apply(o,c.call(arguments,1));for(var r in t)E.contains(e,r)||(n[r]=t[r]);return n},E.defaults=function(t){return j(c.call(arguments,1),function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,n){return n(t),t};var D=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof E&&(t=t._wrapped),n instanceof E&&(n=n._wrapped);var i=f.call(t);if(i!=f.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var o=e.length;o--;)if(e[o]==t)return r[o]==n;var a=t.constructor,u=n.constructor;if(a!==u&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),r.push(n);var s=0,c=!0;if("[object Array]"==i){if(s=t.length,c=s==n.length)for(;s--&&(c=D(t[s],n[s],e,r)););}else{for(var l in t)if(E.has(t,l)&&(s++,!(c=E.has(n,l)&&D(t[l],n[l],e,r))))break;if(c){for(l in n)if(E.has(n,l)&&!s--)break;c=!s}}return e.pop(),r.pop(),c};E.isEqual=function(t,n){return D(t,n,[],[])},E.isEmpty=function(t){if(null==t)return!0;if(E.isArray(t)||E.isString(t))return 0===t.length;for(var n in t)if(E.has(t,n))return!1;return!0},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=x||function(t){return"[object Array]"==f.call(t)},E.isObject=function(t){return t===Object(t)},j(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return!(!t||!E.has(t,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(t){return"function"==typeof t}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!=+t},E.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,n){return p.call(t,n)},E.noConflict=function(){return t._=r,this},E.identity=function(t){return t},E.constant=function(t){return function(){return t}},E.property=function(t){return function(n){return n[t]}},E.matches=function(t){return function(n){if(n===t)return!0;for(var e in t)if(t[e]!==n[e])return!1;return!0}},E.times=function(t,n,e){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=n.call(e,i);return r},E.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},E.now=Date.now||function(){return(new Date).getTime()};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=E.invert(F.escape);var C={escape:new RegExp("["+E.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(F.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(t){E[t]=function(n){return null==n?"":(""+n).replace(C[t],function(n){return F[t][n]})}}),E.result=function(t,n){if(null==t)return void 0;var e=t[n];return E.isFunction(e)?e.call(t):e},E.mixin=function(t){j(E.functions(t),function(n){var e=E[n]=t[n];E.prototype[n]=function(){var t=[this._wrapped];return s.apply(t,arguments),H.call(this,e.apply(E,t))}})};var N=0;E.uniqueId=function(t){var n=++N+"";return t?t+n:n},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(t,n,e){var r;e=E.defaults({},e,E.templateSettings);var i=new RegExp([(e.escape||z).source,(e.interpolate||z).source,(e.evaluate||z).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(n,e,r,i,u){return a+=t.slice(o,u).replace(P,function(t){return"\\"+I[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=u+n.length,n}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(n)return r(n,E);var s=function(t){return r.call(this,t,E)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},E.chain=function(t){return E(t).chain()};var H=function(t){return this._chain?E(t).chain():t};E.mixin(E),j(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];E.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],H.call(this,e)}}),j(["concat","join","slice"],function(t){var n=o[t];E.prototype[t]=function(){return H.call(this,n.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return E})}).call(this)},{}]},{},[1]);