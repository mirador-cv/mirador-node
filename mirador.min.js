!function n(e,t,r){function i(a,s){if(!t[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[a]={exports:{}};e[a][0].call(l.exports,function(n){var t=e[a][1][n];return i(t?t:n)},l,l.exports,n,e,t,r)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(n,e){function t(n){return n.substring(n.indexOf(";base64,")+8).replace("\n","")}function r(n,e,t){if(!this.apikey||!this.authorized)throw"unauthorized";this.xdm.ajax({data:e},function(n){t(null,p.parse(n.results))},function(n){if(n.message&&null!=n.message.responseText){var e={};try{e=JSON.parse(n.message.responseText)}catch(r){e={}}e.status=n.message.status,t(e,null)}else t(n,null)})}function i(n,e,t){var r=new CustomEvent(n,{bubbles:!0,detail:t});e.dispatchEvent(r)}function o(n,e,t){if(this===window)return new o(n,e);if(e=e||function(){},this._inst[n]&&this._inst[n].authorized){var r=this._inst[n];return e.call(r,r),r}this.xdm=h,this.apikey=n;var a=this;this.xdm.authorize(this.apikey,function(){a.authorized=!0,a.onready(a),a._inst[a.apikey]=a,i("mirador.login",window.document,a)},function(n){i("mirador.error",window.document,{error:"unauthorized"}),a.onerror&&s.isFunction(a.onerror)&&a.onerror.call(a,"unauthorized: "+n)}),this.onready=e,this.onerror=t||function(n){throw n}}var a=n("./util"),s=n("underscore"),u=n("util"),c=(n("events"),n("./mirador")),l=n("easyxdm").easyXDM,f=c.MiradorClient,p=(c.miradorRequest,c.MiradorResponse),d="http://api.mirador.im/xdm",h=new l.Rpc({remote:d},{remote:{ajax:{},authorize:{}}}),m=c.reqWrapper;s.extend(a.MiradorRequestList.prototype._processors,{field:function(n,e){if(!n||!n.id)return e(n,null);var r=new window.FileReader;r.onload=function(r){var i=r.target.result;e(null,{id:n.id,data:t(i)})},r.readAsDataURL(n.data)},datauri:function(n,e){return n&&n.data?void e(null,{id:n.id,data:t(n.data)}):e(n,null)},canvas:function(n,e){return n&&n.data?void e(null,{id:n.id,data:t(n.data.toDataURL())}):e(n,null)}}),function(){function n(n,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,e.bubbles,e.cancelable,e.detail),t}n.prototype=window.Event.prototype,window.CustomEvent=n}(),u.inherits(o,f),s.extend(o.prototype,{_inst:{},classifyFiles:m("field",r),classifyDataUri:m("datauri",r),classifyCanvas:m("canvas",r),classifyUrls:m("url",r)}),e.exports={MiradorClient:o},window.MiradorClient=o,window.mirador=function(n,e,t){new o(n,e,t)},i("mirador.ready",document,window.mirador.MiradorClient),s.each(window.mirador_fnx,function(n){n=s.toArray(n),n.length<2||!s.isFunction(n[1])||new o(n[0],n[1],n[2])}),window.jQuery&&(window.jQuery.fn.mirador=function(n,e,t){function r(n,e,t){return function(){var r=s.toArray(arguments),i=function(){};s.isFunction(r[r.length-1])&&(i=r.pop()),r.push(function(n,t){t&&e.trigger(f.resultEvent,t),n&&e.trigger(f.errorEvent,n),i.call(this,n,t)}),e.trigger(f.classificationEvent,n.name,r),n.apply(t,r)}}function i(n){var e=n.target.files;e&&e.length&&this.classifyFiles(e,function(n,e){n?c.trigger(f.errorEvent,n):c.trigger(f.resultEvent,e)})}function a(n){return function(e){var t=new u(e,c);c.trigger(f.loginEvent,t),f.selector?c.on(f.bindTo,f.selector,i.bind(t)):"self"===f.selector&&c.on(f.bindTo,i.bind(t)),n(t,e)}}function u(n,e){this.client=n,this._el=e;var t=this;return s.each(["classifyUrls","classifyFiles","classifyCanvas","classifyBuffers","classifyDataUri"],function(i){e.mirador[i]=t[i]=r(n[i],e,n)}),this}s.isFunction(e)&&null==t&&(t=e,e={});var c=this,l='input[type="file"]';"INPUT"===this.prop("tagName")&&/file/i.test(this.attr("type"))&&(l="self");var f=$.extend({errorEvent:"mirador.error",resultEvent:"mirador.result",readyEvent:"mirador.ready",loginEvent:"mirador.login",classificationEvent:"mirador.classification",selector:l,bindTo:"change"},e);new o(n,a(t))},window.jQuery(function(){window.jQuery.mirador=$(document).mirador,s.each(window.mirador_jnx,function(n){var e=s.toArray(n);$(document).mirador(e[0],e[1],e[2])})}))},{"./mirador":4,"./util":5,easyxdm:11,events:6,underscore:12,util:10}],2:[function(n,e){function t(n,e,t){function i(e){if(e)t(e),t=function(){};else if(o+=1,o>=n.length)return t()}if(!n.length)return t();var o=0;r.each(n,function(n){e(n,r.once(i))})}var r=n("underscore");e.exports={map:function(n,e,i){var o=r.map(n,function(n,e){return{index:e,value:n}}),a=[];t(o,function(n,t){e(n.value,function(e,r){a[n.index]=r,t(e)})},function(n){i(n,a)})}}},{underscore:12}],3:[function(n,e){e.exports={readFile:function(){throw"cannot read file in browser"},readFileAsync:function(){throw"cannot read async in browser"}}},{}],4:[function(n,e){function t(n,e,t){return function(){t=t||this;var r=a.splattedBlock(u.toArray(arguments)),i=r[1],o=a.buildRequestList(r[0]);o.serialize(n,function(n,r){s.map(r,function(r,i){e.call(t,n,r,i)},function(n,e){if(n)return i(n,e);var t={},r=0;u.each(e,function(n){u.each(n,function(n,e){t[e]=n,r++})}),Object.defineProperty(t,"size",{value:r,enumerable:!1,writable:!1}),i(n,t)})})}}function r(n){this.apikey=n}function i(n,e,t){return n?t(n,null):void l.post(c+"/classify").type("form").set("Accept","application/json").send({api_key:this.apikey}).send(e).end(function(n,e){return n||!e.ok?t(n||e.status,e):e.body.results?void t(null,o.parse(e.body.results)):t({errors:"invalid response",code:500},e)})}function o(n,e){return!n||n.errors?(n=n||{},this.id=n.id,void(this.errors=n.errors||"Error in response")):(this.id=n.id||n.url||e,this.value=n.result.value,this.safe=n.result.safe,this.breast=n.result.breast4,this.penis=n.result.penis4,this.vagina=n.result.vagina4,void(this.butt=n.result.butt4))}var a=n("./util.js"),s=n("async"),u=n("underscore"),c="http://api.mirador.im/v1",l=n("superagent");r.prototype={classifyUrls:t("url",i),classifyFiles:t("image",i),classifyBuffers:t("buffer",i),classifyBare:t("bare",i)},r.prototype.classifyRaw=r.prototype.classifyBuffers,o.parse=function(n){var e={},t=!1;return u.each(n,function(n,r){var i=new o(n,r);/^\d+$/.test(i.id)?(t=!0,e[i.id=parseInt(i.id)]=i):e[i.id]=i}),e},e.exports={MiradorClient:r,reqWrapper:t,miradorRequest:i,MiradorResponse:o}},{"./util.js":5,async:2,superagent:3,underscore:12}],5:[function(n,e){function t(n){this._data=n&&n.length?n:[]}function r(n){if(s.isObject(n)&&n.id&&n.data)return[n];if(s.isArray(n)){if(s.isArray(n[0]))return r(n[0]);if("[object FileList]"===n[0].toString()){var e=[];return s.each(n,function(n){s.each(n,function(n){e.push({id:n.name,data:n})})}),e}return s.map(n,function(n,e){if(s.isString(n))return{id:n,data:n};if(s.isObject(n)&&s.has(n,"id")&&s.has(n,"data"))return n;var t=null!=n.id?n.id:null!=n.name?n.name:e;return{id:t,data:n}})}if(s.isObject(n))return s.map(n,function(n,e){return{id:e,data:n}});throw"invalid input: "+n}function i(n){if(!s.isFunction(n[n.length-1]))throw"invalid input: last argument must be a callback!";var e=n.pop();return[n,e]}function o(n){return!s.isArray(n)&&n.length&&(n=s.toArray(n)),new t(r(n))}var a=n("async"),s=n("underscore"),u=n("fs");t.prototype={chunk_size:3,_processors:{url:function(n,e){e(null,n)},image:function(n,e){this._processImage(n.data,function(t,r){return t||!r?e(t,r):void e(null,{id:n.id,data:r})})},buffer:function(n,e){e(null,{id:n.id,data:this._formatBuffer(n.data)})}},serialize:function(n,e){var t=this;a.map(this._data,this._processors[n].bind(this),function(r,i){if(r||!i||!i.length)return e(r,i);var o={},a=0,u=[];s.each(i,function(e){a==t.chunk_size&&(u.push(o),o={},a=0);var r=t._itemKeys(n,a);o[r.id]=e.id,o[r.data]=e.data,a++}),s.isEmpty(o)||u.push(o),e(null,u)})},_processImage:function(n,e){var t=this;u.readFile(n,function(n,r){return n?e(n,null):void e(null,t._formatBuffer(r))})},_formatBuffer:function(n){return n.toString("base64").replace("\n","")},_typeMap:{buffer:"image",field:"image",raw:"image",canvas:"image",datauri:"image"},_itemKeys:function(n,e){n=this._typeMap[n]?this._typeMap[n]:n;var t=n+"["+e+"]";return{id:t+"[id]",data:t+"[data]"}},add:function(n,e){this._data.push({id:n,data:e})},length:function(){return this._data.length}},e.exports={MiradorRequestList:t,buildRequestList:o,splattedBlock:i}},{async:2,fs:3,underscore:12}],6:[function(n,e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(n){return"function"==typeof n}function i(n){return"number"==typeof n}function o(n){return"object"==typeof n&&null!==n}function a(n){return void 0===n}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(n){if(!i(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},t.prototype.emit=function(n){var e,t,i,s,u,c;if(this._events||(this._events={}),"error"===n&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(t=this._events[n],a(t))return!1;if(r(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];t.apply(this,s)}else if(o(t)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=t.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},t.prototype.addListener=function(n,e){var i;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,r(e.listener)?e.listener:e),this._events[n]?o(this._events[n])?this._events[n].push(e):this._events[n]=[this._events[n],e]:this._events[n]=e,o(this._events[n])&&!this._events[n].warned){var i;i=a(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[n].length>i&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),"function"==typeof console.trace&&console.trace())}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(n,e){function t(){this.removeListener(n,t),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return t.listener=e,this.on(n,t),this},t.prototype.removeListener=function(n,e){var t,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(t=this._events[n],a=t.length,i=-1,t===e||r(t.listener)&&t.listener===e)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,e);else if(o(t)){for(s=a;s-->0;)if(t[s]===e||t[s].listener&&t[s].listener===e){i=s;break}if(0>i)return this;1===t.length?(t.length=0,delete this._events[n]):t.splice(i,1),this._events.removeListener&&this.emit("removeListener",n,e)}return this},t.prototype.removeAllListeners=function(n){var e,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[n]&&delete this._events[n],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],r(t))this.removeListener(n,t);else for(;t.length;)this.removeListener(n,t[t.length-1]);return delete this._events[n],this},t.prototype.listeners=function(n){var e;return e=this._events&&this._events[n]?r(this._events[n])?[this._events[n]]:this._events[n].slice():[]},t.listenerCount=function(n,e){var t;return t=n._events&&n._events[e]?r(n._events[e])?1:n._events[e].length:0}},{}],7:[function(n,e){e.exports="function"==typeof Object.create?function(n,e){n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,e){n.super_=e;var t=function(){};t.prototype=e.prototype,n.prototype=new t,n.prototype.constructor=n}},{}],8:[function(n,e){function t(){}var r=e.exports={};r.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(e){var t=[];return window.addEventListener("message",function(n){var e=n.source;if((e===window||null===e)&&"process-tick"===n.data&&(n.stopPropagation(),t.length>0)){var r=t.shift();r()}},!0),function(n){t.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=t,r.addListener=t,r.once=t,r.off=t,r.removeListener=t,r.removeAllListeners=t,r.emit=t,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(n,e){e.exports=function(n){return n&&"object"==typeof n&&"function"==typeof n.copy&&"function"==typeof n.fill&&"function"==typeof n.readUInt8}},{}],10:[function(n,e,t){(function(e,r){function i(n,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(e)?r.showHidden=e:e&&t._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,n,r.depth)}function o(n,e){var t=i.styles[e];return t?"["+i.colors[t][0]+"m"+n+"["+i.colors[t][1]+"m":n}function a(n){return n}function s(n){var e={};return n.forEach(function(n){e[n]=!0}),e}function u(n,e,r){if(n.customInspect&&e&&j(e.inspect)&&e.inspect!==t.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,n);return w(i)||(i=u(n,i,r)),i}var o=c(n,e);if(o)return o;var a=Object.keys(e),m=s(a);if(n.showHidden&&(a=Object.getOwnPropertyNames(e)),E(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(j(e)){var g=e.name?": "+e.name:"";return n.stylize("[Function"+g+"]","special")}if(x(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(O(e))return n.stylize(Date.prototype.toString.call(e),"date");if(E(e))return l(e)}var v="",y=!1,b=["{","}"];if(h(e)&&(y=!0,b=["[","]"]),j(e)){var _=e.name?": "+e.name:"";v=" [Function"+_+"]"}if(x(e)&&(v=" "+RegExp.prototype.toString.call(e)),O(e)&&(v=" "+Date.prototype.toUTCString.call(e)),E(e)&&(v=" "+l(e)),0===a.length&&(!y||0==e.length))return b[0]+v+b[1];if(0>r)return x(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);var k;return k=y?f(n,e,r,m,a):a.map(function(t){return p(n,e,r,m,t,y)}),n.seen.pop(),d(k,v,b)}function c(n,e){if(_(e))return n.stylize("undefined","undefined");if(w(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,"string")}return y(e)?n.stylize(""+e,"number"):m(e)?n.stylize(""+e,"boolean"):g(e)?n.stylize("null","null"):void 0}function l(n){return"["+Error.prototype.toString.call(n)+"]"}function f(n,e,t,r,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(R(e,String(a))?p(n,e,t,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(n,e,t,r,i,!0))}),o}function p(n,e,t,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):c.set&&(s=n.stylize("[Setter]","special")),R(r,i)||(a="["+i+"]"),s||(n.seen.indexOf(c.value)<0?(s=g(t)?u(n,c.value,null):u(n,c.value,t-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(n){return"  "+n}).join("\n").substr(2):"\n"+s.split("\n").map(function(n){return"   "+n}).join("\n"))):s=n.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+s}function d(n,e,t){var r=0,i=n.reduce(function(n,e){return r++,e.indexOf("\n")>=0&&r++,n+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===e?"":e+"\n ")+" "+n.join(",\n  ")+" "+t[1]:t[0]+e+" "+n.join(", ")+" "+t[1]}function h(n){return Array.isArray(n)}function m(n){return"boolean"==typeof n}function g(n){return null===n}function v(n){return null==n}function y(n){return"number"==typeof n}function w(n){return"string"==typeof n}function b(n){return"symbol"==typeof n}function _(n){return void 0===n}function x(n){return k(n)&&"[object RegExp]"===S(n)}function k(n){return"object"==typeof n&&null!==n}function O(n){return k(n)&&"[object Date]"===S(n)}function E(n){return k(n)&&("[object Error]"===S(n)||n instanceof Error)}function j(n){return"function"==typeof n}function M(n){return null===n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||"symbol"==typeof n||"undefined"==typeof n}function S(n){return Object.prototype.toString.call(n)}function F(n){return 10>n?"0"+n.toString(10):n.toString(10)}function A(){var n=new Date,e=[F(n.getHours()),F(n.getMinutes()),F(n.getSeconds())].join(":");return[n.getDate(),D[n.getMonth()],e].join(" ")}function R(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var T=/%[sdj%]/g;t.format=function(n){if(!w(n)){for(var e=[],t=0;t<arguments.length;t++)e.push(i(arguments[t]));return e.join(" ")}for(var t=1,r=arguments,o=r.length,a=String(n).replace(T,function(n){if("%%"===n)return"%";if(t>=o)return n;switch(n){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch(e){return"[Circular]"}default:return n}}),s=r[t];o>t;s=r[++t])a+=g(s)||!k(s)?" "+s:" "+i(s);return a},t.deprecate=function(n,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(_(r.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(e.noDeprecation===!0)return n;var a=!1;return o};var L,N={};t.debuglog=function(n){if(_(L)&&(L=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!N[n])if(new RegExp("\\b"+n+"\\b","i").test(L)){var r=e.pid;N[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else N[n]=function(){};return N[n]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=w,t.isSymbol=b,t.isUndefined=_,t.isRegExp=x,t.isObject=k,t.isDate=O,t.isError=E,t.isFunction=j,t.isPrimitive=M,t.isBuffer=n("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n("inherits"),t._extend=function(n,e){if(!e||!k(e))return n;for(var t=Object.keys(e),r=t.length;r--;)n[t[r]]=e[t[r]];return n}}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(n,e){!function(n,e,t,r,i,o){function a(n,e){var t=typeof n[e];return"function"==t||!("object"!=t||!n[e])||"unknown"==t}function s(n,e){return!("object"!=typeof n[e]||!n[e])}function u(n){return"[object Array]"===Object.prototype.toString.call(n)}function c(){var n="Shockwave Flash",e="application/x-shockwave-flash";if(!w(navigator.plugins)&&"object"==typeof navigator.plugins[n]){var t=navigator.plugins[n].description;t&&!w(navigator.mimeTypes)&&navigator.mimeTypes[e]&&navigator.mimeTypes[e].enabledPlugin&&(S=t.match(/\d+/g))}if(!S){var r;try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),S=Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),r=null}catch(i){}}if(!S)return!1;var o=parseInt(S[0],10),a=parseInt(S[1],10);return F=o>9&&a>0,!0}function l(){if(!J){J=!0;for(var n=0;n<$.length;n++)$[n]();$.length=0}}function f(n,e){return J?void n.call(e):void $.push(function(){n.call(e)})}function p(){var n=parent;if(""!==B)for(var e=0,t=B.split(".");e<t.length;e++)n=n[t[e]];return n.easyXDM}function d(e){return n.easyXDM=I,B=e,B&&(H="easyXDM_"+B.replace(".","_")+"_"),P}function h(n){return n.match(D)[3]}function m(n){return n.match(D)[4]||""}function g(n){var e=n.toLowerCase().match(D),t=e[2],r=e[3],i=e[4]||"";return("http:"==t&&":80"==i||"https:"==t&&":443"==i)&&(i=""),t+"//"+r+i}function v(n){if(n=n.replace(z,"$1/"),!n.match(/^(http||https):\/\//)){var e="/"===n.substring(0,1)?"":t.pathname;"/"!==e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/")+1)),n=t.protocol+"//"+t.host+e+n}for(;C.test(n);)n=n.replace(C,"");return n}function y(n,e){var t="",r=n.indexOf("#");-1!==r&&(t=n.substring(r),n=n.substring(0,r));var i=[];for(var a in e)e.hasOwnProperty(a)&&i.push(a+"="+o(e[a]));return n+(q?"#":-1==n.indexOf("?")?"?":"&")+i.join("&")+t}function w(n){return"undefined"==typeof n}function b(n,e,t){var r;for(var i in e)e.hasOwnProperty(i)&&(i in n?(r=e[i],"object"==typeof r?b(n[i],r,t):t||(n[i]=e[i])):n[i]=e[i]);return n}function _(){var n=e.body.appendChild(e.createElement("form")),t=n.appendChild(e.createElement("input"));t.name=H+"TEST"+L,M=t!==n.elements[t.name],e.body.removeChild(n)}function x(n){w(M)&&_();var t;M?t=e.createElement('<iframe name="'+n.props.name+'"/>'):(t=e.createElement("IFRAME"),t.name=n.props.name),t.id=t.name=n.props.name,delete n.props.name,"string"==typeof n.container&&(n.container=e.getElementById(n.container)),n.container||(b(t.style,{position:"absolute",top:"-2000px",left:"0px"}),n.container=e.body);var r=n.props.src;if(n.props.src="javascript:false",b(t,n.props),t.border=t.frameBorder=0,t.allowTransparency=!0,n.container.appendChild(t),n.onLoad&&A(t,"load",n.onLoad),n.usePost){var i,o=n.container.appendChild(e.createElement("form"));if(o.target=t.name,o.action=r,o.method="POST","object"==typeof n.usePost)for(var a in n.usePost)n.usePost.hasOwnProperty(a)&&(M?i=e.createElement('<input name="'+a+'"/>'):(i=e.createElement("INPUT"),i.name=a),i.value=n.usePost[a],o.appendChild(i));o.submit(),o.parentNode.removeChild(o)}else t.src=r;return n.props.src=r,t}function k(n,e){"string"==typeof n&&(n=[n]);for(var t,r=n.length;r--;)if(t=n[r],t=new RegExp("^"==t.substr(0,1)?t:"^"+t.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),t.test(e))return!0;return!1}function O(r){var i,o=r.protocol;if(r.isHost=r.isHost||w(W.xdm_p),q=r.hash||!1,r.props||(r.props={}),r.isHost)r.remote=v(r.remote),r.channel=r.channel||"default"+L++,r.secret=Math.random().toString(16).substring(2),w(o)&&(o=g(t.href)==g(r.remote)?"4":a(n,"postMessage")||a(e,"postMessage")?"1":r.swf&&a(n,"ActiveXObject")&&c()?"6":"Gecko"===navigator.product&&"frameElement"in n&&-1==navigator.userAgent.indexOf("WebKit")?"5":r.remoteHelper?"2":"0");else if(r.channel=W.xdm_c.replace(/["'<>\\]/g,""),r.secret=W.xdm_s,r.remote=W.xdm_e.replace(/["'<>\\]/g,""),o=W.xdm_p,r.acl&&!k(r.acl,r.remote))throw new Error("Access denied for "+r.remote);switch(r.protocol=o,o){case"0":if(b(r,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),r.isHost){if(!r.local){for(var s,u=t.protocol+"//"+t.host,l=e.body.getElementsByTagName("img"),f=l.length;f--;)if(s=l[f],s.src.substring(0,u.length)===u){r.local=s.src;break}r.local||(r.local=n)}var p={xdm_c:r.channel,xdm_p:0};r.local===n?(r.usePolling=!0,r.useParent=!0,r.local=t.protocol+"//"+t.host+t.pathname+t.search,p.xdm_e=r.local,p.xdm_pa=1):p.xdm_e=v(r.local),r.container&&(r.useResize=!1,p.xdm_po=1),r.remote=y(r.remote,p)}else b(r,{channel:W.xdm_c,remote:W.xdm_e,useParent:!w(W.xdm_pa),usePolling:!w(W.xdm_po),useResize:r.useParent?!1:r.useResize});i=[new P.stack.HashTransport(r),new P.stack.ReliableBehavior({}),new P.stack.QueueBehavior({encode:!0,maxLength:4e3-r.remote.length}),new P.stack.VerifyBehavior({initiate:r.isHost})];break;case"1":i=[new P.stack.PostMessageTransport(r)];break;case"2":r.isHost&&(r.remoteHelper=v(r.remoteHelper)),i=[new P.stack.NameTransport(r),new P.stack.QueueBehavior,new P.stack.VerifyBehavior({initiate:r.isHost})];break;case"3":i=[new P.stack.NixTransport(r)];break;case"4":i=[new P.stack.SameOriginTransport(r)];break;case"5":i=[new P.stack.FrameElementTransport(r)];break;case"6":S||c(),i=[new P.stack.FlashTransport(r)]}return i.push(new P.stack.QueueBehavior({lazy:r.lazy,remove:!0})),i}function E(n){for(var e,t={incoming:function(n,e){this.up.incoming(n,e)},outgoing:function(n,e){this.down.outgoing(n,e)},callback:function(n){this.up.callback(n)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},r=0,i=n.length;i>r;r++)e=n[r],b(e,t,!0),0!==r&&(e.down=n[r-1]),r!==i-1&&(e.up=n[r+1]);return e}function j(n){n.up.down=n.down,n.down.up=n.up,n.up=n.down=null}var M,S,F,A,R,T=this,L=Math.floor(1e4*Math.random()),N=Function.prototype,D=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,C=/[\-\w]+\/\.\.\//,z=/([^:])\/\//g,B="",P={},I=n.easyXDM,H="easyXDM_",q=!1;if(a(n,"addEventListener"))A=function(n,e,t){n.addEventListener(e,t,!1)},R=function(n,e,t){n.removeEventListener(e,t,!1)};else{if(!a(n,"attachEvent"))throw new Error("Browser not supported");A=function(n,e,t){n.attachEvent("on"+e,t)},R=function(n,e,t){n.detachEvent("on"+e,t)}}var U,J=!1,$=[];if("readyState"in e?(U=e.readyState,J="complete"==U||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==U||"interactive"==U)):J=!!e.body,!J){if(a(n,"addEventListener"))A(e,"DOMContentLoaded",l);else if(A(e,"readystatechange",function(){"complete"==e.readyState&&l()}),e.documentElement.doScroll&&n===top){var X=function(){if(!J){try{e.documentElement.doScroll("left")}catch(n){return void r(X,1)}l()}};X()}A(n,"load",l)}var W=function(n){n=n.substring(1).split("&");for(var e,t={},r=n.length;r--;)e=n[r].split("="),t[e[0]]=i(e[1]);return t}(/xdm_e=/.test(t.search)?t.search:t.hash),Q=function(){var n={},e={a:[1,2,3]},t='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(e).replace(/\s/g,"")===t?JSON:(Object.toJSON&&Object.toJSON(e).replace(/\s/g,"")===t&&(n.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(e=t.evalJSON(),e.a&&3===e.a.length&&3===e.a[2]&&(n.parse=function(n){return n.evalJSON()})),n.stringify&&n.parse?(Q=function(){return n},n):null)};b(P,{version:"2.4.19.3",query:W,stack:{},apply:b,getJSONObject:Q,whenReady:f,noConflict:d}),P.DomHelper={on:A,un:R,requiresJSON:function(t){s(n,"JSON")||e.write('<script type="text/javascript" src="'+t+'"></script>')}},function(){var n={};P.Fn={set:function(e,t){n[e]=t},get:function(e,t){if(n.hasOwnProperty(e)){var r=n[e];return t&&delete n[e],r}}}}(),P.Socket=function(n){var e=E(O(n).concat([{incoming:function(e,t){n.onMessage(e,t)},callback:function(e){n.onReady&&n.onReady(e)}}])),t=g(n.remote);this.origin=g(n.remote),this.destroy=function(){e.destroy()},this.postMessage=function(n){e.outgoing(n,t)},e.init()},P.Rpc=function(n,e){if(e.local)for(var t in e.local)if(e.local.hasOwnProperty(t)){var r=e.local[t];"function"==typeof r&&(e.local[t]={method:r})}var i=E(O(n).concat([new P.stack.RpcBehavior(this,e),{callback:function(e){n.onReady&&n.onReady(e)}}]));this.origin=g(n.remote),this.destroy=function(){i.destroy()},i.init()},P.stack.SameOriginTransport=function(n){var e,i,o,a;return e={outgoing:function(n,e,t){o(n),t&&t()},destroy:function(){i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){a=g(n.remote),n.isHost?(b(n.props,{src:y(n.remote,{xdm_e:t.protocol+"//"+t.host+t.pathname,xdm_c:n.channel,xdm_p:4}),name:H+n.channel+"_provider"}),i=x(n),P.Fn.set(n.channel,function(n){return o=n,r(function(){e.up.callback(!0)},0),function(n){e.up.incoming(n,a)}})):(o=p().Fn.get(n.channel,!0)(function(n){e.up.incoming(n,a)}),r(function(){e.up.callback(!0)},0))},init:function(){f(e.onDOMReady,e)}}},P.stack.FlashTransport=function(n){function i(n){r(function(){s.up.incoming(n,c)},0)}function a(t){var r=n.swf+"?host="+n.isHost,i="easyXDM_swf_"+Math.floor(1e4*Math.random());P.Fn.set("flash_loaded"+t.replace(/[\-.]/g,"_"),function(){P.stack.FlashTransport[t].swf=l=p.firstChild;for(var n=P.stack.FlashTransport[t].queue,e=0;e<n.length;e++)n[e]();n.length=0}),n.swfContainer?p="string"==typeof n.swfContainer?e.getElementById(n.swfContainer):n.swfContainer:(p=e.createElement("div"),b(p.style,F&&n.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),e.body.appendChild(p));var a="callback=flash_loaded"+o(t.replace(/[\-.]/g,"_"))+"&proto="+T.location.protocol+"&domain="+o(h(T.location.href))+"&port="+o(m(T.location.href))+"&ns="+o(B);p.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+i+"' data='"+r+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+r+"'></param><param name='flashvars' value='"+a+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+a+"' allowScriptAccess='always' wmode='transparent' src='"+r+"' height='1' width='1'></embed></object>"}var s,u,c,l,p;return s={outgoing:function(e,t,r){l.postMessage(n.channel,e.toString()),r&&r()},destroy:function(){try{l.destroyChannel(n.channel)}catch(e){}l=null,u&&(u.parentNode.removeChild(u),u=null)},onDOMReady:function(){c=n.remote,P.Fn.set("flash_"+n.channel+"_init",function(){r(function(){s.up.callback(!0)})}),P.Fn.set("flash_"+n.channel+"_onMessage",i),n.swf=v(n.swf);var e=h(n.swf),o=function(){P.stack.FlashTransport[e].init=!0,l=P.stack.FlashTransport[e].swf,l.createChannel(n.channel,n.secret,g(n.remote),n.isHost),n.isHost&&(F&&n.swfNoThrottle&&b(n.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),b(n.props,{src:y(n.remote,{xdm_e:g(t.href),xdm_c:n.channel,xdm_p:6,xdm_s:n.secret}),name:H+n.channel+"_provider"}),u=x(n))};P.stack.FlashTransport[e]&&P.stack.FlashTransport[e].init?o():P.stack.FlashTransport[e]?P.stack.FlashTransport[e].queue.push(o):(P.stack.FlashTransport[e]={queue:[o]},a(e))},init:function(){f(s.onDOMReady,s)}}},P.stack.PostMessageTransport=function(e){function i(n){if(n.origin)return g(n.origin);if(n.uri)return g(n.uri);if(n.domain)return t.protocol+"//"+n.domain;throw"Unable to retrieve the origin of the event"}function o(n){var t=i(n);t==c&&n.data.substring(0,e.channel.length+1)==e.channel+" "&&a.up.incoming(n.data.substring(e.channel.length+1),t)}var a,s,u,c;return a={outgoing:function(n,t,r){u.postMessage(e.channel+" "+n,t||c),r&&r()},destroy:function(){R(n,"message",o),s&&(u=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(c=g(e.remote),e.isHost){var i=function(t){t.data==e.channel+"-ready"&&(u="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,R(n,"message",i),A(n,"message",o),r(function(){a.up.callback(!0)},0))};A(n,"message",i),b(e.props,{src:y(e.remote,{xdm_e:g(t.href),xdm_c:e.channel,xdm_p:1}),name:H+e.channel+"_provider"}),s=x(e)}else A(n,"message",o),u="postMessage"in n.parent?n.parent:n.parent.document,u.postMessage(e.channel+"-ready",c),r(function(){a.up.callback(!0)},0)},init:function(){f(a.onDOMReady,a)}}},P.stack.FrameElementTransport=function(i){var o,a,s,u;return o={outgoing:function(n,e,t){s.call(this,n),t&&t()},destroy:function(){a&&(a.parentNode.removeChild(a),a=null)},onDOMReady:function(){u=g(i.remote),i.isHost?(b(i.props,{src:y(i.remote,{xdm_e:g(t.href),xdm_c:i.channel,xdm_p:5}),name:H+i.channel+"_provider"}),a=x(i),a.fn=function(n){return delete a.fn,s=n,r(function(){o.up.callback(!0)},0),function(n){o.up.incoming(n,u)}}):(e.referrer&&g(e.referrer)!=W.xdm_e&&(n.top.location=W.xdm_e),s=n.frameElement.fn(function(n){o.up.incoming(n,u)
}),o.up.callback(!0))},init:function(){f(o.onDOMReady,o)}}},P.stack.NameTransport=function(n){function e(e){var t=n.remoteHelper+(s?"#_3":"#_2")+n.channel;u.contentWindow.sendMessage(e,t)}function t(){s?2!==++l&&s||a.up.callback(!0):(e("ready"),a.up.callback(!0))}function i(n){a.up.incoming(n,d)}function o(){p&&r(function(){p(!0)},0)}var a,s,u,c,l,p,d,h;return a={outgoing:function(n,t,r){p=r,e(n)},destroy:function(){u.parentNode.removeChild(u),u=null,s&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){s=n.isHost,l=0,d=g(n.remote),n.local=v(n.local),s?(P.Fn.set(n.channel,function(e){s&&"ready"===e&&(P.Fn.set(n.channel,i),t())}),h=y(n.remote,{xdm_e:n.local,xdm_c:n.channel,xdm_p:2}),b(n.props,{src:h+"#"+n.channel,name:H+n.channel+"_provider"}),c=x(n)):(n.remoteHelper=n.remote,P.Fn.set(n.channel,i));var e=function(){var i=u||this;R(i,"load",e),P.Fn.set(n.channel+"_load",o),function a(){"function"==typeof i.contentWindow.sendMessage?t():r(a,50)}()};u=x({props:{src:n.local+"#_4"+n.channel},onLoad:e})},init:function(){f(a.onDOMReady,a)}}},P.stack.HashTransport=function(e){function t(n){if(m){var t=e.remote+"#"+d++ +"_"+n;(u||!v?m.contentWindow:m).location=t}}function i(n){p=n,s.up.incoming(p.substring(p.indexOf("_")+1),y)}function o(){if(h){var n=h.location.href,e="",t=n.indexOf("#");-1!=t&&(e=n.substring(t)),e&&e!=p&&i(e)}}function a(){c=setInterval(o,l)}var s,u,c,l,p,d,h,m,v,y;return s={outgoing:function(n){t(n)},destroy:function(){n.clearInterval(c),(u||!v)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){if(u=e.isHost,l=e.interval,p="#"+e.channel,d=0,v=e.useParent,y=g(e.remote),u){if(b(e.props,{src:e.remote,name:H+e.channel+"_provider"}),v)e.onLoad=function(){h=n,a(),s.up.callback(!0)};else{var t=0,i=e.delay/50;!function o(){if(++t>i)throw new Error("Unable to reference listenerwindow");try{h=m.contentWindow.frames[H+e.channel+"_consumer"]}catch(n){}h?(a(),s.up.callback(!0)):r(o,50)}()}m=x(e)}else h=n,a(),v?(m=parent,s.up.callback(!0)):(b(e,{props:{src:e.remote+"#"+e.channel+new Date,name:H+e.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),m=x(e))},init:function(){f(s.onDOMReady,s)}}},P.stack.ReliableBehavior=function(){var n,e,t=0,r=0,i="";return n={incoming:function(o,a){var s=o.indexOf("_"),u=o.substring(0,s).split(",");o=o.substring(s+1),u[0]==t&&(i="",e&&e(!0)),o.length>0&&(n.down.outgoing(u[1]+","+t+"_"+i,a),r!=u[1]&&(r=u[1],n.up.incoming(o,a)))},outgoing:function(o,a,s){i=o,e=s,n.down.outgoing(r+","+ ++t+"_"+o,a)}}},P.stack.QueueBehavior=function(n){function e(){if(n.remove&&0===s.length)return void j(t);if(!u&&0!==s.length&&!a){u=!0;var i=s.shift();t.down.outgoing(i.data,i.origin,function(n){u=!1,i.callback&&r(function(){i.callback(n)},0),e()})}}var t,a,s=[],u=!0,c="",l=0,f=!1,p=!1;return t={init:function(){w(n)&&(n={}),n.maxLength&&(l=n.maxLength,p=!0),n.lazy?f=!0:t.down.init()},callback:function(n){u=!1;var r=t.up;e(),r.callback(n)},incoming:function(e,r){if(p){var o=e.indexOf("_"),a=parseInt(e.substring(0,o),10);c+=e.substring(o+1),0===a&&(n.encode&&(c=i(c)),t.up.incoming(c,r),c="")}else t.up.incoming(e,r)},outgoing:function(r,i,a){n.encode&&(r=o(r));var u,c=[];if(p){for(;0!==r.length;)u=r.substring(0,l),r=r.substring(u.length),c.push(u);for(;u=c.shift();)s.push({data:c.length+"_"+u,origin:i,callback:0===c.length?a:null})}else s.push({data:r,origin:i,callback:a});f?t.down.init():e()},destroy:function(){a=!0,t.down.destroy()}}},P.stack.VerifyBehavior=function(n){function e(){r=Math.random().toString(16).substring(2),t.down.outgoing(r)}var t,r,i;return t={incoming:function(o,a){var s=o.indexOf("_");-1===s?o===r?t.up.callback(!0):i||(i=o,n.initiate||e(),t.down.outgoing(o)):o.substring(0,s)===i&&t.up.incoming(o.substring(s+1),a)},outgoing:function(n,e,i){t.down.outgoing(r+"_"+n,e,i)},callback:function(){n.initiate&&e()}}},P.stack.RpcBehavior=function(n,e){function t(n){n.jsonrpc="2.0",o.down.outgoing(a.stringify(n))}function r(n,e){var r=Array.prototype.slice;return function(){var i,o=arguments.length,a={method:e};o>0&&"function"==typeof arguments[o-1]?(o>1&&"function"==typeof arguments[o-2]?(i={success:arguments[o-2],error:arguments[o-1]},a.params=r.call(arguments,0,o-2)):(i={success:arguments[o-1]},a.params=r.call(arguments,0,o-1)),c[""+ ++s]=i,a.id=s):a.params=r.call(arguments,0),n.namedParams&&1===a.params.length&&(a.params=a.params[0]),t(a)}}function i(n,e,r,i){if(!r)return void(e&&t({id:e,error:{code:-32601,message:"Procedure not found."}}));var o,a;e?(o=function(n){o=N,t({id:e,result:n})},a=function(n,r){a=N;var i={id:e,error:{code:-32099,message:n}};r&&(i.error.data=r),t(i)}):o=a=N,u(i)||(i=[i]);try{var s=r.method.apply(r.scope,i.concat([o,a]));w(s)||o(s)}catch(c){a(c.message)}}var o,a=e.serializer||Q(),s=0,c={};return o={incoming:function(n){var r=a.parse(n);if(r.method)e.handle?e.handle(r,t):i(r.method,r.id,e.local[r.method],r.params);else{var o=c[r.id];r.error?o.error&&o.error(r.error):o.success&&o.success(r.result),delete c[r.id]}},init:function(){if(e.remote)for(var t in e.remote)e.remote.hasOwnProperty(t)&&(n[t]=r(e.remote[t],t));o.down.init()},destroy:function(){for(var t in e.remote)e.remote.hasOwnProperty(t)&&n.hasOwnProperty(t)&&delete n[t];o.down.destroy()}}},T.easyXDM=P}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),e&&void 0!==e.exports&&(e.exports.easyXDM=window.easyXDM,window.easyXDM=void 0)},{}],12:[function(n,e,t){(function(){var n=this,r=n._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,l=o.concat,f=a.toString,p=a.hasOwnProperty,d=o.forEach,h=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,w=o.some,b=o.indexOf,_=o.lastIndexOf,x=Array.isArray,k=Object.keys,O=s.bind,E=function(n){return n instanceof E?n:this instanceof E?void(this._wrapped=n):new E(n)};"undefined"!=typeof t?("undefined"!=typeof e&&e.exports&&(t=e.exports=E),t._=E):n._=E,E.VERSION="1.6.0";var j=E.each=E.forEach=function(n,e,t){if(null==n)return n;if(d&&n.forEach===d)n.forEach(e,t);else if(n.length===+n.length){for(var r=0,o=n.length;o>r;r++)if(e.call(t,n[r],r,n)===i)return}else for(var a=E.keys(n),r=0,o=a.length;o>r;r++)if(e.call(t,n[a[r]],a[r],n)===i)return;return n};E.map=E.collect=function(n,e,t){var r=[];return null==n?r:h&&n.map===h?n.map(e,t):(j(n,function(n,i,o){r.push(e.call(t,n,i,o))}),r)};var M="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(n,e,t,r){var i=arguments.length>2;if(null==n&&(n=[]),m&&n.reduce===m)return r&&(e=E.bind(e,r)),i?n.reduce(e,t):n.reduce(e);if(j(n,function(n,o,a){i?t=e.call(r,t,n,o,a):(t=n,i=!0)}),!i)throw new TypeError(M);return t},E.reduceRight=E.foldr=function(n,e,t,r){var i=arguments.length>2;if(null==n&&(n=[]),g&&n.reduceRight===g)return r&&(e=E.bind(e,r)),i?n.reduceRight(e,t):n.reduceRight(e);var o=n.length;if(o!==+o){var a=E.keys(n);o=a.length}if(j(n,function(s,u,c){u=a?a[--o]:--o,i?t=e.call(r,t,n[u],u,c):(t=n[u],i=!0)}),!i)throw new TypeError(M);return t},E.find=E.detect=function(n,e,t){var r;return S(n,function(n,i,o){return e.call(t,n,i,o)?(r=n,!0):void 0}),r},E.filter=E.select=function(n,e,t){var r=[];return null==n?r:v&&n.filter===v?n.filter(e,t):(j(n,function(n,i,o){e.call(t,n,i,o)&&r.push(n)}),r)},E.reject=function(n,e,t){return E.filter(n,function(n,r,i){return!e.call(t,n,r,i)},t)},E.every=E.all=function(n,e,t){e||(e=E.identity);var r=!0;return null==n?r:y&&n.every===y?n.every(e,t):(j(n,function(n,o,a){return(r=r&&e.call(t,n,o,a))?void 0:i}),!!r)};var S=E.some=E.any=function(n,e,t){e||(e=E.identity);var r=!1;return null==n?r:w&&n.some===w?n.some(e,t):(j(n,function(n,o,a){return r||(r=e.call(t,n,o,a))?i:void 0}),!!r)};E.contains=E.include=function(n,e){return null==n?!1:b&&n.indexOf===b?-1!=n.indexOf(e):S(n,function(n){return n===e})},E.invoke=function(n,e){var t=c.call(arguments,2),r=E.isFunction(e);return E.map(n,function(n){return(r?e:n[e]).apply(n,t)})},E.pluck=function(n,e){return E.map(n,E.property(e))},E.where=function(n,e){return E.filter(n,E.matches(e))},E.findWhere=function(n,e){return E.find(n,E.matches(e))},E.max=function(n,e,t){if(!e&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var r=-1/0,i=-1/0;return j(n,function(n,o,a){var s=e?e.call(t,n,o,a):n;s>i&&(r=n,i=s)}),r},E.min=function(n,e,t){if(!e&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var r=1/0,i=1/0;return j(n,function(n,o,a){var s=e?e.call(t,n,o,a):n;i>s&&(r=n,i=s)}),r},E.shuffle=function(n){var e,t=0,r=[];return j(n,function(n){e=E.random(t++),r[t-1]=r[e],r[e]=n}),r},E.sample=function(n,e,t){return null==e||t?(n.length!==+n.length&&(n=E.values(n)),n[E.random(n.length-1)]):E.shuffle(n).slice(0,Math.max(0,e))};var F=function(n){return null==n?E.identity:E.isFunction(n)?n:E.property(n)};E.sortBy=function(n,e,t){return e=F(e),E.pluck(E.map(n,function(n,r,i){return{value:n,index:r,criteria:e.call(t,n,r,i)}}).sort(function(n,e){var t=n.criteria,r=e.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(r>t||void 0===r)return-1}return n.index-e.index}),"value")};var A=function(n){return function(e,t,r){var i={};return t=F(t),j(e,function(o,a){var s=t.call(r,o,a,e);n(i,s,o)}),i}};E.groupBy=A(function(n,e,t){E.has(n,e)?n[e].push(t):n[e]=[t]}),E.indexBy=A(function(n,e,t){n[e]=t}),E.countBy=A(function(n,e){E.has(n,e)?n[e]++:n[e]=1}),E.sortedIndex=function(n,e,t,r){t=F(t);for(var i=t.call(r,e),o=0,a=n.length;a>o;){var s=o+a>>>1;t.call(r,n[s])<i?o=s+1:a=s}return o},E.toArray=function(n){return n?E.isArray(n)?c.call(n):n.length===+n.length?E.map(n,E.identity):E.values(n):[]},E.size=function(n){return null==n?0:n.length===+n.length?n.length:E.keys(n).length},E.first=E.head=E.take=function(n,e,t){return null==n?void 0:null==e||t?n[0]:0>e?[]:c.call(n,0,e)},E.initial=function(n,e,t){return c.call(n,0,n.length-(null==e||t?1:e))},E.last=function(n,e,t){return null==n?void 0:null==e||t?n[n.length-1]:c.call(n,Math.max(n.length-e,0))},E.rest=E.tail=E.drop=function(n,e,t){return c.call(n,null==e||t?1:e)},E.compact=function(n){return E.filter(n,E.identity)};var R=function(n,e,t){return e&&E.every(n,E.isArray)?l.apply(t,n):(j(n,function(n){E.isArray(n)||E.isArguments(n)?e?u.apply(t,n):R(n,e,t):t.push(n)}),t)};E.flatten=function(n,e){return R(n,e,[])},E.without=function(n){return E.difference(n,c.call(arguments,1))},E.partition=function(n,e){var t=[],r=[];return j(n,function(n){(e(n)?t:r).push(n)}),[t,r]},E.uniq=E.unique=function(n,e,t,r){E.isFunction(e)&&(r=t,t=e,e=!1);var i=t?E.map(n,t,r):n,o=[],a=[];return j(i,function(t,r){(e?r&&a[a.length-1]===t:E.contains(a,t))||(a.push(t),o.push(n[r]))}),o},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(n){var e=c.call(arguments,1);return E.filter(E.uniq(n),function(n){return E.every(e,function(e){return E.contains(e,n)})})},E.difference=function(n){var e=l.apply(o,c.call(arguments,1));return E.filter(n,function(n){return!E.contains(e,n)})},E.zip=function(){for(var n=E.max(E.pluck(arguments,"length").concat(0)),e=new Array(n),t=0;n>t;t++)e[t]=E.pluck(arguments,""+t);return e},E.object=function(n,e){if(null==n)return{};for(var t={},r=0,i=n.length;i>r;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t},E.indexOf=function(n,e,t){if(null==n)return-1;var r=0,i=n.length;if(t){if("number"!=typeof t)return r=E.sortedIndex(n,e),n[r]===e?r:-1;r=0>t?Math.max(0,i+t):t}if(b&&n.indexOf===b)return n.indexOf(e,t);for(;i>r;r++)if(n[r]===e)return r;return-1},E.lastIndexOf=function(n,e,t){if(null==n)return-1;var r=null!=t;if(_&&n.lastIndexOf===_)return r?n.lastIndexOf(e,t):n.lastIndexOf(e);for(var i=r?t:n.length;i--;)if(n[i]===e)return i;return-1},E.range=function(n,e,t){arguments.length<=1&&(e=n||0,n=0),t=arguments[2]||1;for(var r=Math.max(Math.ceil((e-n)/t),0),i=0,o=new Array(r);r>i;)o[i++]=n,n+=t;return o};var T=function(){};E.bind=function(n,e){var t,r;if(O&&n.bind===O)return O.apply(n,c.call(arguments,1));if(!E.isFunction(n))throw new TypeError;return t=c.call(arguments,2),r=function(){if(!(this instanceof r))return n.apply(e,t.concat(c.call(arguments)));T.prototype=n.prototype;var i=new T;T.prototype=null;var o=n.apply(i,t.concat(c.call(arguments)));return Object(o)===o?o:i}},E.partial=function(n){var e=c.call(arguments,1);return function(){for(var t=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===E&&(r[i]=arguments[t++]);for(;t<arguments.length;)r.push(arguments[t++]);return n.apply(this,r)}},E.bindAll=function(n){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return j(e,function(e){n[e]=E.bind(n[e],n)}),n},E.memoize=function(n,e){var t={};return e||(e=E.identity),function(){var r=e.apply(this,arguments);return E.has(t,r)?t[r]:t[r]=n.apply(this,arguments)}},E.delay=function(n,e){var t=c.call(arguments,2);return setTimeout(function(){return n.apply(null,t)},e)},E.defer=function(n){return E.delay.apply(E,[n,1].concat(c.call(arguments,1)))},E.throttle=function(n,e,t){var r,i,o,a=null,s=0;t||(t={});var u=function(){s=t.leading===!1?0:E.now(),a=null,o=n.apply(r,i),r=i=null};return function(){var c=E.now();s||t.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,s=c,o=n.apply(r,i),r=i=null):a||t.trailing===!1||(a=setTimeout(u,l)),o}},E.debounce=function(n,e,t){var r,i,o,a,s,u=function(){var c=E.now()-a;e>c?r=setTimeout(u,e-c):(r=null,t||(s=n.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=E.now();var c=t&&!r;return r||(r=setTimeout(u,e)),c&&(s=n.apply(o,i),o=i=null),s}},E.once=function(n){var e,t=!1;return function(){return t?e:(t=!0,e=n.apply(this,arguments),n=null,e)}},E.wrap=function(n,e){return E.partial(e,n)},E.compose=function(){var n=arguments;return function(){for(var e=arguments,t=n.length-1;t>=0;t--)e=[n[t].apply(this,e)];return e[0]}},E.after=function(n,e){return function(){return--n<1?e.apply(this,arguments):void 0}},E.keys=function(n){if(!E.isObject(n))return[];if(k)return k(n);var e=[];for(var t in n)E.has(n,t)&&e.push(t);return e},E.values=function(n){for(var e=E.keys(n),t=e.length,r=new Array(t),i=0;t>i;i++)r[i]=n[e[i]];return r},E.pairs=function(n){for(var e=E.keys(n),t=e.length,r=new Array(t),i=0;t>i;i++)r[i]=[e[i],n[e[i]]];return r},E.invert=function(n){for(var e={},t=E.keys(n),r=0,i=t.length;i>r;r++)e[n[t[r]]]=t[r];return e},E.functions=E.methods=function(n){var e=[];for(var t in n)E.isFunction(n[t])&&e.push(t);return e.sort()},E.extend=function(n){return j(c.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},E.pick=function(n){var e={},t=l.apply(o,c.call(arguments,1));return j(t,function(t){t in n&&(e[t]=n[t])}),e},E.omit=function(n){var e={},t=l.apply(o,c.call(arguments,1));for(var r in n)E.contains(t,r)||(e[r]=n[r]);return e},E.defaults=function(n){return j(c.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},E.clone=function(n){return E.isObject(n)?E.isArray(n)?n.slice():E.extend({},n):n},E.tap=function(n,e){return e(n),n};var L=function(n,e,t,r){if(n===e)return 0!==n||1/n==1/e;if(null==n||null==e)return n===e;n instanceof E&&(n=n._wrapped),e instanceof E&&(e=e._wrapped);var i=f.call(n);if(i!=f.call(e))return!1;switch(i){case"[object String]":return n==String(e);case"[object Number]":return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object RegExp]":return n.source==e.source&&n.global==e.global&&n.multiline==e.multiline&&n.ignoreCase==e.ignoreCase}if("object"!=typeof n||"object"!=typeof e)return!1;for(var o=t.length;o--;)if(t[o]==n)return r[o]==e;var a=n.constructor,s=e.constructor;if(a!==s&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in e)return!1;t.push(n),r.push(e);var u=0,c=!0;if("[object Array]"==i){if(u=n.length,c=u==e.length)for(;u--&&(c=L(n[u],e[u],t,r)););}else{for(var l in n)if(E.has(n,l)&&(u++,!(c=E.has(e,l)&&L(n[l],e[l],t,r))))break;if(c){for(l in e)if(E.has(e,l)&&!u--)break;c=!u}}return t.pop(),r.pop(),c};E.isEqual=function(n,e){return L(n,e,[],[])},E.isEmpty=function(n){if(null==n)return!0;if(E.isArray(n)||E.isString(n))return 0===n.length;for(var e in n)if(E.has(n,e))return!1;return!0},E.isElement=function(n){return!(!n||1!==n.nodeType)},E.isArray=x||function(n){return"[object Array]"==f.call(n)},E.isObject=function(n){return n===Object(n)},j(["Arguments","Function","String","Number","Date","RegExp"],function(n){E["is"+n]=function(e){return f.call(e)=="[object "+n+"]"}}),E.isArguments(arguments)||(E.isArguments=function(n){return!(!n||!E.has(n,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(n){return"function"==typeof n}),E.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},E.isNaN=function(n){return E.isNumber(n)&&n!=+n},E.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},E.isNull=function(n){return null===n},E.isUndefined=function(n){return void 0===n},E.has=function(n,e){return p.call(n,e)},E.noConflict=function(){return n._=r,this},E.identity=function(n){return n},E.constant=function(n){return function(){return n}},E.property=function(n){return function(e){return e[n]}},E.matches=function(n){return function(e){if(e===n)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0}},E.times=function(n,e,t){for(var r=Array(Math.max(0,n)),i=0;n>i;i++)r[i]=e.call(t,i);return r},E.random=function(n,e){return null==e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))},E.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=E.invert(N.escape);var D={escape:new RegExp("["+E.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(N.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(n){E[n]=function(e){return null==e?"":(""+e).replace(D[n],function(e){return N[n][e]})}}),E.result=function(n,e){if(null==n)return void 0;var t=n[e];return E.isFunction(t)?t.call(n):t},E.mixin=function(n){j(E.functions(n),function(e){var t=E[e]=n[e];E.prototype[e]=function(){var n=[this._wrapped];return u.apply(n,arguments),I.call(this,t.apply(E,n))}})};var C=0;E.uniqueId=function(n){var e=++C+"";return n?n+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(n,e,t){var r;t=E.defaults({},t,E.templateSettings);var i=new RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),o=0,a="__p+='";n.replace(i,function(e,t,r,i,s){return a+=n.slice(o,s).replace(P,function(n){return"\\"+B[n]}),t&&(a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+e.length,e}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return r(e,E);var u=function(n){return r.call(this,n,E)};return u.source="function("+(t.variable||"obj")+"){\n"+a+"}",u},E.chain=function(n){return E(n).chain()};var I=function(n){return this._chain?E(n).chain():n};E.mixin(E),j(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=o[n];E.prototype[n]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!=n&&"splice"!=n||0!==t.length||delete t[0],I.call(this,t)}}),j(["concat","join","slice"],function(n){var e=o[n];E.prototype[n]=function(){return I.call(this,e.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return E})}).call(this)},{}]},{},[1]);